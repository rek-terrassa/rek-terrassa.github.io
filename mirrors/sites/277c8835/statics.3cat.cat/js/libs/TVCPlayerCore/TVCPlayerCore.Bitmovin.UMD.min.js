!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("VideoPlugin")):"function"==typeof define&&define.amd?define(["VideoPlugin"],t):"object"==typeof exports?exports.TVCPlayerCore=t(require("VideoPlugin")):e.TVCPlayerCore=t(e.VideoPlugin)}(window,function(i){return a={},s.m=n=[function(e,t,i){var n;void 0===(n=function(){"use strict";return{VIDEO:0,AD:1}}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";function e(){this.cuepoints=[]}return(e.prototype={addCuepoint:function(e){return e.timestopass=0,this.cuepoints.push(e),e},getCuePointsByTime:function(t){var i=[],n=0,s=0;return _.each(this.cuepoints,function(e){n=e.negativemargin||GLOBALCONFIGURATION.CUEPOINTSMARGIN.NEGATIVE,s=e.positivemargin||GLOBALCONFIGURATION.CUEPOINTSMARGIN.POSITIVE,t>=e.ms-n&&t<e.ms+s&&i.push(e)}),i},removeCuepoint:function(e){var t=this,i=-1;e=_.isUndefined(e.length)?[e]:e,_.each(e,function(e){-1!==(i=_.indexOf(t.cuepoints,e))&&t.cuepoints.splice(i,1)})},checkCuepoints:function(t){var e,i,n;e=this.getCuePointsByTime(t),i=[],_.each(e,function(e){n=e.callback,e.timestopass<=0?(e.once&&i.push(e),n(t,e)):e.timestopass=e.timestopass-1},this),this.removeCuepoint(i)}}).constructor=e}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";function e(e,t){this.el=e,this.defaultStyles=null,this.playlist=t,this.refresh=_.bind(this.refresh,this),this.unload=_.bind(this.unload,this),this.clearAndRefresh=_.bind(this.clearAndRefresh,this),this.playlist&&(this.playlist.addEvent("fullscreen",this.refresh),this.playlist.addEvent("destroy",this.unload),this.playlist.addEvent("seeking",this.clearAndRefresh),this.playlist.addEvent("seeked",this.clearAndRefresh)),this.setDefaultPersonalization()}return(e.prototype={load:function(e,t){this.cuepoints=e;function i(e){s.getTTMetadata(e),s.getStylesFromFile(e),s.getRegionsFromFile(e),s.getEntriesFromFile(e),s.setupDefaultActiveRegions(),s.addCuepoints(),s.loadedResponse=e,s.loadedResponseUrl=t}function n(e){debug&&printLog("Error loading subtitles: "+e)}var s=this;if(this.loadedResponseUrl===t)return this.clearAndRefresh(),void this.addCuepoints();$.ajax?$.ajax({url:t,success:i,error:n}):ajaxLib.getAJAXResponse({url:t,type:"xml",onSucces:i,onError:n})},unload:function(){this.removeCuepoints(),this.clearSubtitlesDiv()},clearSubtitlesDiv:function(){this.el.innerHTML=""},clearAndRefresh:function(){var e=this;setTimeout(function(){e.clearSubtitlesDiv(),e.refresh()},0)},refresh:function(){var e=this;setTimeout(function(){e.setDefaultConfiguration(),e.setupDefaultActiveRegions()},0)},getTTMetadata:function(t){var e;e=_.compact(_.map(t.attributes,function(e){return this.parseTTAtributtes(e.nodeName,e.nodeValue,t)},this)),this.ttNodeConfig=_.reduce(e,function(i,e){return _.each(e,function(e,t){i[t]=e}),i},{cellResolution:{columns:40,rows:24}}),this.setDefaultConfiguration()},setDefaultConfiguration:function(){this.el.style.fontSize=this.convertCtoPx("1c","y")},getStylesFromFile:function(e){var t,i,n=this;t=this.ttNamespaceHelper(e,"style"),this.styles={},_.each(t,function(t){i=_.compact(_.map(t.attributes,function(e){return n.parseTTAtributtes(e.nodeName,e.nodeValue,t)})),i=_.reduce(i,function(i,e){return _.each(e,function(e,t){i[t]=e}),i},{}),n.styles[t.getAttribute("xml:id")]=i})},parseTTAtributtes:function(e,a,o){var t,i,r=this;switch(e){case"ttp:cellResolution":return{cellResolution:{columns:(i=a.split(" "))[0],rows:i[1]}};case"tts:backgroundColor":return{backgroundColor:r.hexToRgba(a)};case"tts:color":return{color:r.hexToRgba(a)};case"tts:fontFamily":return{fontFamily:a};case"tts:fontSize":return{fontSize:function(e){var t=a;return r.personalizationEnabled&&(t=r.getFontSizePersonalizedValue()),t}};case"tts:fontStyle":return{fontStyle:a};case"tts:fontWeight":return{fontWeight:a};case"tts:lineHeight":return{lineHeight:a};case"tts:textDecoration":return{textDecoration:a};case"tts:textAlign":return{textAlign:function(){return a}};case"tts:wrapOption":return{whiteSpace:"wrap"===a?"normal":"nowrap"};case"ebutts:multiRowAlign":return{"noop-multiRowAlign":function(e){_.each(e.getElementsByClassName("multiRowAlign"),function(e){e.className+=" multiRowAlign-"+a})}};case"ebutts:linePadding":return{"noop-linePadding":function(e){var t="0px "+r.convertCtoPx(a,"x");_.each(e.getElementsByClassName("subtitle-line"),function(e){e.style.padding=t})}};case"tts:origin":return{"noop-origin":function(e){var t,i=a.split(" "),n=i[1],s=i[0];r.personalizationEnabled&&"top"===r.getSubtPositionPersonalized()&&(t=parseFloat(o.getAttribute("tts:extent").split(" ")[1].split("%")[0]),n=100-((n=parseFloat(n.split("%")[0]))+t)+"%"),e.style.top=n,e.style.left=s}};case"tts:extent":return{width:(t=a.split(" "))[0],height:t[1]};case"tts:padding":return{"noop-padding":function(e){_.each(e.getElementsByClassName("regionPadding"),function(e){e.style.padding=a})}};case"tts:showBackground":return"whenActive"===a?{backgroundColor:function(){return r.styles[o.getAttribute("style")].backgroundColor}}:{"noop-showBackground":!0};case"tts:overflow":return{overflow:a};case"style":return this.styles[a];case"tts:displayAlign":return{"noop-displayAlign":function(e){var t=a;r.personalizationEnabled&&(t="top"===r.getSubtPositionPersonalized()?"before":"after"),_.each(e.getElementsByClassName("displayAlign"),function(e){e.className+=" displayAlign-"+t})}}}},getRegionsFromFile:function(e){var t,i,n=this;t=this.ttNamespaceHelper(e,"region"),this.regions={},_.each(t,function(t){i=_.compact(_.map(t.attributes,function(e){return n.parseTTAtributtes(e.nodeName,e.nodeValue,t)})),i=_.reduce(i,function(i,e){return _.each(e,function(e,t){i[t]=e}),i},{}),n.regions[t.getAttribute("xml:id")]=i})},setupDefaultActiveRegions:function(){var t,i=this;_.each(this.regions,function(e){e["noop-showBackground"]&&((t=document.createElement("div")).className="region",t=i.applyTTMLAttrToHTMLElement(t,e),i.el.appendChild(t))})},getEntriesFromFile:function(e){var t,i=this;this.getDefaultStyles(e),t=this.ttNamespaceHelper(e,"p"),this.entries=[],_.each(t,function(e,t){e=i.getEntry(e,t),_.isUndefined(e)||i.entries.push(e)})},getEntry:function(e,t){var i=this.parseEntryTTNodes(e);return{begin:this.timeToMS(e.getAttribute("begin")),end:this.timeToMS(e.getAttribute("end")),id:e.getAttribute("xml:id")||t,style:e.getAttribute("style"),region:e.getAttribute("region"),text:i}},getDefaultStyles:function(e){var t;this.defaultStyles=[],null!==(t=this.ttNamespaceHelper(e,"div")[0].getAttribute("style"))&&this.defaultStyles.push(t),null!==(t=this.ttNamespaceHelper(e,"body")[0].getAttribute("style"))&&this.defaultStyles.push(t)},parseEntryTTNodes:function(e){var t,i=this;return _.map(e.childNodes,function(e){return t=i.getSubtitleElement(e),e.childNodes&&0<e.childNodes.length&&(t.innerHTML=i.parseEntryTTNodes(e)),t.outerHTML||t}).join("")},getSubtitleElement:function(e){var t;switch(e.nodeName){case"tt:span":case"span":return(t=document.createElement("span")).className="span-subtitle",this.applyTTMLStyleIdToHTMLElement(t,e.getAttribute("style"));case"tt:br":case"br":return document.createElement("br");case"#text":return 0<e.textContent.trim().length?'<span class="subtitle-line">'+_.escape(e.textContent)+"</span>":""}},timeToMS:function(e){var t,i,n=0;return t=e.split(":"),n+=3600*parseInt(t[0],10),n+=60*parseInt(t[1],10),i=t[2].split("."),n+=parseInt(i[0],10),n*=1e3,1<i.length&&(n+=parseInt(i[1],10)),n},hexToRgba:function(e){var t;return 7===e.length?(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")"):9===e.length?(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),"rgba("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+","+(parseInt(t[4],16)/255).toFixed(1)+")"):null},addCuepoints:function(){var t,i=this;this.removeCuepoints(),_.each(this.entries,function(e){t=i.cuepoints.addCuepoint({ms:e.begin,callback:i.showSubtitle(e),negativemargin:GLOBALCONFIGURATION.SUBTITLES.BEGINCUEPOINTSMARGIN.NEGATIVE,positivemargin:GLOBALCONFIGURATION.SUBTITLES.BEGINCUEPOINTSMARGIN.POSITIVE}),i.addedCuepoints.push(t),t=i.cuepoints.addCuepoint({ms:e.end,callback:i.hideCurrentSubtitles(),negativemargin:GLOBALCONFIGURATION.SUBTITLES.ENDCUEPOINTSMARGIN.NEGATIVE,positivemargin:GLOBALCONFIGURATION.SUBTITLES.ENDCUEPOINTSMARGIN.POSITIVE}),i.addedCuepoints.push(t)})},removeCuepoints:function(){var t=this;this.addedCuepoints=this.addedCuepoints||[],_.each(this.addedCuepoints,function(e){t.cuepoints.removeCuepoint(e)}),this.addedCuepoints=[]},showSubtitle:function(n){var s=this,a=this.hideCurrentSubtitles();return function(){var t,e,i;-1===s.el.innerHTML.indexOf('id="'+n.id+'"')&&((!s.lastBegin||n.begin<s.lastBegin)&&a(),s.lastBegin=n.begin,t=document.createElement("div"),_.each(s.defaultStyles,function(e){t=s.applyTTMLStyleIdToHTMLElement(t,e)},s),(e=document.createElement("div")).className="paragraphContainer",e.innerHTML='<div class="multiRowAlign">'+n.text+"</div>",e=s.applyTTMLStyleIdToHTMLElement(e,n.style),(i=document.createElement("div")).id=n.id,i.className="regionContainer",i.innerHTML='<div class="displayAlign regionPadding">'+e.outerHTML+"</div>",s.personalizationEnabled&&("active"===s.getBackgroundPersonalizedValue()?i.className+=" user-force-background":i.className+=" user-no-background"),i=s.applyTTMLRegionIdToHTMLElement(i,n.region),t.appendChild(i),s.el.appendChild(t))}},hideCurrentSubtitles:function(){var e=this;return function(){for(;e.el.firstChild;)e.el.removeChild(e.el.firstChild)}},applyTTMLStyleIdToHTMLElement:function(t,e){var i=this;if(e){var n=e.split(" ");_.each(n,function(e){t=i.applyTTMLAttrToHTMLElement(t,i.styles[e])})}return t},applyTTMLRegionIdToHTMLElement:function(e,t){return this.applyTTMLAttrToHTMLElement(e,this.regions[t])},applyTTMLAttrToHTMLElement:function(i,e){return _.each(e,function(e,t){try{0===t.indexOf("noop-")?e(i):i.style[t]=_.isFunction(e)?e(i):e}catch(e){}}),i},getRemoveSubtCallback:function(e){var t=this;return function(){t.el.removeChild(e)}},convertCtoPx:function(e,t){var i;return this.ttNodeConfig?(i="x"===t?this.el.offsetWidth/this.ttNodeConfig.cellResolution.columns:this.el.offsetHeight/this.ttNodeConfig.cellResolution.rows,e=e.replace(/(\d+(?:\.\d*)?)c\b/g,function(e,t){return t*i+"px"})):"0px"},ttNamespaceHelper:function(e,t){var i=e.getElementsByTagName("tt:"+t);return 0===i.length&&(i=e.getElementsByTagName(t)),i},ttStylePositioningHelper:function(e,t){return e.getAttribute(t).split(" ")},setDefaultPersonalization:function(){this.personalizationEnabled=null,this.personalizationBackgroundActive=null,this.personalizationFontSizeIndex=null,this.personalizationFontSizeValues=["140%","180%","220%"],this.personalizationSubtPositionOnTop=null},setPersonalizationActivation:function(e){this.personalizationEnabled=e,this.clearSubtitlesDiv()},setBackgroundPersonalized:function(e){this.personalizationBackgroundActive=e,this.clearSubtitlesDiv()},setFontSizePersonalized:function(e){this.personalizationFontSizeIndex=e,this.clearSubtitlesDiv()},setPositionPersonalized:function(e){this.personalizationSubtPositionOnTop=e,this.clearSubtitlesDiv()},getSubtPositionPersonalized:function(){return this.personalizationSubtPositionOnTop?"top":"bottom"},getBackgroundPersonalizedValue:function(){return this.personalizationBackgroundActive?"active":"disabled"},getFontSizePersonalizedValue:function(){return this.personalizationFontSizeValues[this.personalizationFontSizeIndex]}}).constructor=e}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;n=[i(7)],void 0===(s=function(s){"use strict";var e,a,o,r,h="URL_NOT_AVAILABLE",p="HAS_NOT_RIGHTS";return(e=function(e,t,i,n){this.videoId=e,this.model=t,this.videoManager=new s(this.videoId),this.autoplay=i||!1,this.startTime=n||0,this.addEventProxy(),void 0!==this.model.get("newservice")?_.extend(this,r):(this.isVideo=void 0===this.model.get("audio"),this.isVideo?_.extend(this,o):_.extend(this,a)),this.refreshDuration(),this.bindToChangeEvent()}).prototype=_.extend({allEvents:["audioTrackChanged","playliststart","playlistend","playlistready","changevideo","timeupdate","play","pause","buffering","volumechange","canskipad","casting","resetTrackEvents","ended","seeking","seeked","vastparsed","vasterror","adtimeupdate","mute","unmute","fullscreen","skip","error","loadedmetadata","progress","destroy","sas_adstart","sas_adend","sas_adcreativitybegin","sas_adcreativityend","mediatimeout","quality","related-playlist-loaded","related-playlist-show","related-playlist-close","related-playlist-click","subtitlesinit","subtitleschange","recoveringfrommidroll","recoveredfrommidroll","openPopup","startOver","ready"],setStartTime:function(e){this.startTime=e},setAutoplay:function(e){this.autoplay=e},refreshDuration:function(){var i=this;this.bindTo(this,"loadedmetadata",function(){var e=i.sendCommand("getActualVideo");if(e&&0===e.type){var t=Math.floor(i.sendCommand("getDuration"));i.model.set({durada_segs:t/1e3,durada_h:i.model.secToHHMMSS(t/1e3)})}})},addEventProxy:function(){var a=this;_.each(this.allEvents,function(s){a.bindTo(a.videoManager,s,function(e,t){if("error"===s&&a.model){var i=a.videoManager.playlist;if(i.elements[i.index-1].adtype)return;var n=a.model.getQualityOptions?a.model.getQualityOptions():null;if(n&&(a.currentFallbackQuality||(a.currentFallbackQuality=0),a.currentFallbackQuality<n.length))return a.model.setVideoQuality(n[a.currentFallbackQuality++].label),void a.model.fetch()}a.trigger(s,e,t)})})},destroy:function(){this.unbindAll(),this.videoManager.destroy()},sendCommand:function(){return this.videoManager.sendCommand.apply(this.videoManager,arguments)},bindTo:function(e,t,i){this.bindings=this.bindings||[],e.bind=e.bind||e.addEventListener||e.on,e.jquery?e.bind(t,i):e.bind(t,i,this),this.bindings.push({model:e,ev:t,callback:i})},unbindAll:function(){this.bindings=this.bindings||[],_.each(this.bindings,function(e){var t=e.model;t.unbind=t.unbind||t.removeEventListener||t.off,t.jquery?t.unbind(e.ev,e.callback):t.unbind(e.ev,e.callback,this)},this),this.bindings=[]}},Backbone.Events),a={bindToChangeEvent:function(){var e=this;this.bindTo(this.model,"change:audio",function(){e.changeMedia()})},changeMedia:function(){var e;e=this.model.get("seccio")+","+this.model.get("idprograma"),this.videoManager.loadVideo({videourl:this.model.get("audio"),adserverurl:this.model.get("publicitat").toJSON(),autoplay:this.autoplay},{poster:"",etic:"",video:!1,isLive:this.model.get("isLive"),format:"MP4",categoriaRanking:e,categoriaTematica:this.model.get("tematica"),promo:this.model.get("programa"),tipusEmissio:this.model.get("tipus_emi"),tipusContingut:this.model.get("tipus_contingut"),emissora:this.model.get("emissora"),canal:this.model.get("canal"),subcanal:this.model.get("subcanal"),data:this.model.get("data"),idInt:this.model.get("id"),titol:this.model.get("title"),durada:this.model.get("durada_segs"),e10:this.model.get("title"),e22:this.model.get("subcanal")})}},o={bindToChangeEvent:function(){var e=this;this.bindTo(this.model,"change:videos",function(){e.changeMedia()})},changeMedia:function(){var e=this;if(void 0!==this.model.get("videos")){if(this.videomodel=void 0,GLOBALCONFIGURATION.QUALITY){var t=this.model.get("videos").where({qualitat:GLOBALCONFIGURATION.QUALITY});0<t.length&&(this.videomodel=t[0])}this.videomodel=this.videomodel||this.model.get("videos").at(0),this.videomodel=this.model.get("videos").at(0),this.bindTo(this.videomodel,"change",function(){e.changeVideo()}),void 0===this.videomodel.get("media")?this.videomodel.fetch():this.changeVideo()}},changeVideo:function(){var e,t,i=this.videomodel.get("media");if(i)if(this.model.get("geoblocked"))this.trigger("error",{text:"Ho sentim, aquest contingut no es pot veure des de fora de Catalunya"});else{if(this.model.get("audiencies")&&(e=this.model.get("audiencies").get("sitecatalyst"),t=this.model.get("audiencies").get("adobe_analytics")),!this.videoManager.playlist)return this.trigger("error",{});this.videoManager.loadVideo({videourl:i,adserverurl:this.videomodel.get("publicitat").toJSON(),autoplay:this.autoplay},{poster:this.model.get("image").at(0).get("url"),etic:this.model.get("codi_etic_idName"),promo:this.model.get("promo"),video:!0,op:this.model.get("op"),capitol:this.model.get("capitol"),isLive:this.model.get("isLive"),nom:this.model.get("nom"),format:this.videomodel.get("format"),categoriaCR:this.model.get("categoriaCR"),categoriaRanking:this.model.get("categoriaRanking"),categoriaTematica:this.model.get("categoriaTematica"),tipusContingut:this.model.get("tipus_contingut"),data:this.model.get("data"),idInt:this.model.get("id"),titol:this.model.get("title"),durada:this.model.get("durada_segs"),e10:this.model.get("title"),e22:"No Informat",siteCatalystModel:e,heartbeatsModel:t})}else this.trigger("error",{text:"Contingut no disponible"})}},r={refreshDuration:function(){var i=this;!1===this.model.get("islive")&&this.bindTo(this,"loadedmetadata",function(){var e=i.sendCommand("getActualVideo");if(e&&0===e.type){var t=Math.floor(i.sendCommand("getDuration"));i.model.get("informacio").get("durada").set({text:i.model.secToHHMMSS(t/1e3),milisegons:t});try{i.model.get("audiencies").get("sitecatalyst").set({durada:t/1e3})}catch(e){}}})},bindToChangeEvent:function(){var t=this;this.bindTo(this.model,"change:media",function(){if(404===t.model.get("code"))return t.model.set("informacio",null),t.trigger("error",{});var e=t.getInfoModel();t.bindTo(e,"change:rights",function(){t.changeMedia()}),t.bindTo(t.model,"change:informacio",function(){t.changeMeta()}),t.changeMedia()})},changeMedia:function(){var t,i,n=this.model.get("islive"),e=!0===n?["informacio","arafem","codi_etic","id"]:["informacio","codi_etic","id"],s=this.getDeepValue(this.model,e),a={},o="",r="",d=null;if(t=this.model.get("variants")?this.model.get("variants").getStreamVad():"",this.model.get("publicitat")&&(a=this.model.get("publicitat").toJSON()),(r=this.model.get("imatges"))&&0<=r.length&&(o=r.at(0).get("url")),this.model.get("subtitols")&&this.model.get("subtitols").models.length&&(d=JSON.stringify(this.model.get("subtitols").models)),n){var l=this.model.get("informacio"),u=l?l.get("arafem"):null;if(u&&u.onRightsMayChange){var c=_.bind(u.onRightsMayChange,u);this.model.get("media").on("reset",c)}}(i=this).model.get("media").getStreamWithDeepCheck(function(e){_.delay(function(){return null===e?i.throwNotPlayableError(h):i.hasRights()&&""!==e?i.videoManager.playlist?void i.videoManager.loadVideo({videourl:e,videourlvad:t,adserverurl:a,startTime:i.startTime,autoplay:i.autoplay},{poster:o,etic:s,promo:i.model.get("promo"),video:i.model.get("video"),isLive:n,durada:i.getDeepValue(i.model,["informacio","durada","milisegons"]),duradaFixa:i.getDeepValue(i.model,["informacio","durada","fixa"]),siteCatalystModel:i.getDeepValue(i.model,["audiencies","sitecatalyst"]),heartbeatsModel:i.getDeepValue(i.model,["audiencies","adobe_analytics"]),matrModel:i.getDeepValue(i.model,["audiencies","matr"]),comscoreModel:i.getDeepValue(i.model,["audiencies","comscore"]),kantarModel:i.getDeepValue(i.model,["audiencies","kantarst"]),youboraModel:i.getDeepValue(i.model,["youbora"]),relatedModel:i.getDeepValue(i.model,["relacionats"]),relatedEditorModel:i.getDeepValue(i.model,["relacionatsEditor"]),geo:i.getGeoForURL(e),titol:i.getDeepValue(i.model,["informacio","titol"])||i.getDeepValue(i.model,["informacio","arafem","titol_complet"])||i.getDeepValue(i.model,["informacio","nom"]),descripcio:i.getDeepValue(i.model,["informacio","descripcio"])||i.getDeepValue(i.model,["informacio","arafem","descripcio"]),programa:i.getDeepValue(i.model,["informacio","programa"]),idint:i.model.get("idint"),isGeoBlocked:i.model.get("geoblocked"),hasAudioDesc:void 0!==i.getDeepValue(i.model,["variants","AUD"]),subtitleList:d,airDate:i.getDeepValue(i.model,["informacio","data_emissio","text"]),format:i.model.get("media").at(0).get("format")}):i.trigger("error",{}):i.throwNotPlayableError(p)},1e3)})},changeMeta:function(){this.videoManager.changeMeta({durada:this.getDeepValue(this.model,["informacio","durada","milisegons"]),duradaFixa:this.getDeepValue(this.model,["informacio","durada","fixa"]),titol:this.getDeepValue(this.model,["informacio","titol"])||this.getDeepValue(this.model,["informacio","nom"])})},getGeoForURL:function(e){var t="";try{t=this.model.get("media").findWhere({url:e}).get("geo")}catch(e){}return t},getDeepValue:function(e,t){return _.reduce(t,function(e,t){if(_.isObject(e)&&_.isFunction(e.get))return e.get(t)},e)},getInfoModel:function(){var e=!0===this.model.get("islive")?["informacio","arafem"]:["informacio"];return this.getDeepValue(this.model,e)},hasRights:function(){var e=!0;!0===this.model.get("islive")&&(e=this.getInfoModel().get("rights"));return e},throwNotPlayableError:function(e){var t={params:{errorType:e}};if(e===p){var i=this.getInfoModel().get("drets");t.params.msg=i&&i.text}this.trigger("error",t)}},e}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";function t(e){this.videoManager=e}return(t.prototype={videoevents:["play","pause","ended","error","casting","loadedmetadata","destroy","sas_adstart","sas_adend","timeupdate","quality","subtitlesinit","subtitleschange"],initialize:function(e){var t=this;this.model=e,_.isUndefined(e)||(_.isUndefined(window.Matr)?this.loadMatr().then(function(){t.initializeMatr()}):this.initializeMatr())},initializeMatr:function(){this._hasBeenInitialized()&&this.dispose(),this.setProductID(),this.setURLsFromMediaJsp(),this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners(),this.isPlaying=!1,this.isCasting=!1,this.isAdvert=!1,this.avoidReplays=!1,this.profile="web",this.counter=0,this.mediaProperties=null,this.subtitlesProperties=null,this.firstTimeupdateTimestamp=null;var c=this;window.geoZoneHandler&&geoZoneHandler.getGeoZone(function(e){try{var l=Math.floor(1e5*Math.random()+1).toString()+(new Date).getTime().toString(),u=c._getInterval();c.initObject={sessionID:l,origin:window.location,AplicationID:CONFIGJSON.BDTRACKING.APLICATIONID,life_offset:CONFIGJSON.BDTRACKING.LIFE_OFFSET,interval:u,tagDataHW:function(){if(c._shouldInitWindowFunctions()&&c._initWindowFunctions(),c.isPlaying||c.isAdvert||c.isEnded){var e,t,i=c.model.getParametres(),n=0,s=!i.directe,a=!!i.startover,o=!0,r=!1,d=0;return c.videoManager.video&&(n=c.currentTime,_.isNumber(n)||(n=0)),s&&(r=c.previousTc!==n,o=1e3<n&&r),a&&(n=c._findGapFromStartOverAndBroadcast(n),i.directe="startover"),o?(d=Math.floor(n/1e3),c.counter=c.counter+1,e={pid:i.pid,cast:c.isCasting,cid:i.content.id_dty,cvar:i.content.variant,sbt:i.content.sbt,sbtd:i.content.sbtd,ui:window.resolveUser?window.resolveUser():"",ri:window.resolveRegister?window.resolveRegister():"",type:i.tipus,live:c.resolveLive(),plid:l,tc:d,uid:Matr.UID,count:c.counter,freq:u/1e3,pv:c.resolvePlayerVersion()},c.hasToSetQuality(i)&&c.hasQualityValue(i)&&(e.qualitat=i.content.qualitat),c.hasFormatValue(i)&&(e.format=i.content.format),c.previousTc=n,e.bostr=(new Date).getTime(),_.isNull(Matr.debugInfo)||(e.debug=Matr.debugInfo,Matr.debugInfo=null),c.previousCid&&i.content.id_dty!=c.previousCid&&(t="playerIdRepetit: cid actual "+i.content.id_dty+" cid anterior "+c.previousCid,e.debug?e.debug=e.debug.concat("; ",t):e.debug=t),c.previousCid=i.content.id_dty,!_.isEmpty(i.dynamic_content)&&_.isObject(i.dynamic_content)&&(e=_.extend(e,i.dynamic_content)),e):void 0}}}}catch(e){window.printLog(e)}})},loadMatr:function(){return new Promise(function(t){if(window.Didomi&&window.resolveRegister&&""===window.resolveRegister()){var e=!1,i=function(){!e&&Didomi.getUserConsentStatusForVendor("c:matr-2b3yWcPU")&&(e=!0,window.Matr?t():requirejs(["https://statics.3cat.cat/js/libs/matr.min.js"],function(e){t()}))};Didomi.on("consent.changed",i),i()}else requirejs(["https://statics.3cat.cat/js/libs/matr.min.js"],function(e){t()})})},setProductID:function(){window.Matr.pid=this.model.getParametres().pid},setURLsFromMediaJsp:function(){var e=this.model.get("urls");e&&window.Matr&&(window.Matr.URLS.SENDMARK=e.sendmark,window.Matr.URLS.SENDUSERDATA=e.senduserdata,window.Matr.URLS.CHECKCORS=e.checkcors,window.Matr.URLS.GETTIME=e.gettime,window.Matr.URLS.SENDUSERCHANNELS=e.senduserchannels)},resolveLive:function(){var e=this.model.getParametres().directe,t=!!this.model.getParametres().startover,i=!(!this.mediaProperties||!this.mediaProperties.dvr)&&this.mediaProperties.dvr;return t?e="startover":i&&(e="dvr"),e},resolvePlayerVersion:function(){return CONFIGJSON.PLAYERNAME&&CONFIGJSON.PLAYERVERSION?CONFIGJSON.PLAYERNAME+"-"+CONFIGJSON.PLAYERVERSION:CONFIGJSON.PLAYERNAME?CONFIGJSON.PLAYERNAME:"nadiu"},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)}),window.addEventListener("beforeunload",this.eventHandler)},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)}),window.removeEventListener("beforeunload",this.eventHandler)},_getInterval:function(){return!this.model.getParametres().directe&&window.resolveCcmaUser&&""!==window.resolveCcmaUser()?3e4:55e3},eventHandler:function(e){switch(e.type){case"loadedmetadata":break;case"quality":this.mediaProperties=e.params;break;case"timeupdate":this.currentTime=e.params?e.params.ms:0;try{this.shouldIniMatr()&&(this.setAnonymization(this.initObject),Matr.Ini(this.initObject),this.avoidReplays=!0)}catch(e){window.printLog(e)}break;case"casting":this.isCasting=e.params.active;break;case"play":this.isPlaying=!0,this.firstTimeupdateTimestamp=null;break;case"beforeunload":this.initObject.currentTimer&&this.initObject.currentTimer.trigger();break;case"ended":this.initObject.currentTimer&&(this.isEnded=!0,this.isPlaying=!1,this.isAdvert=!1,this.initObject.currentTimer.trigger(),this.isEnded=!1);break;case"error":case"pause":this.isPlaying=!1,this.isAdvert=!1;break;case"destroy":this.dispose();break;case"sas_adstart":this.isAdvert=!0;break;case"sas_adend":this.isAdvert=!1;break;case"subtitleschange":case"subtitlesinit":this.subtitlesProperties=e.params}},setAnonymization:function(){this.initObject.anonymous=this.model.get("anonymous")},dispose:function(){this._stopMatrTimer(),this.isPlaying=!1,this.unRegisterListeners()},hasToSetQuality:function(e){return"video"===e.tipus},hasQualityValue:function(e){return e.content.qualitat},hasFormatValue:function(e){return e.content.format||this.mediaProperties},shouldIniMatr:function(){var e=!1;switch(this.model.getParametres().pid){case"HbbTV_TDT":this.iniMatrHbbtv()&&(e=!0);break;default:this.firstTimeupdateTimestamp||(this.firstTimeupdateTimestamp=(new Date).getTime()),1e3<(new Date).getTime()-this.firstTimeupdateTimestamp&&(this.iniMatrDiferit()||this.iniMatrDirecte())&&(e=!0)}return e},iniMatrDirecte:function(){return this.initObject&&!this.avoidReplays&&this.model.getParametres().directe&&!this.isAdvert},iniMatrDiferit:function(){return this.initObject&&!this.avoidReplays&&!this.model.getParametres().directe},iniMatrHbbtv:function(){return this.initObject&&!this.avoidReplays&&this.model.getParametres().directe},_hasBeenInitialized:function(){return!!this.initObject},_stopMatrTimer:function(){this.initObject&&this.initObject.currentTimer&&this.initObject.currentTimer.clear()},_findGapFromStartOverAndBroadcast:function(e){var t=window.Matr&&window.Matr.diffDateInMilis!==window.Matr.defaultDiffTime?window.Matr.diffDateInMilis:0;return window.Matr.getStartOverStartDateTime()+e-((new Date).getTime()+t)},_initWindowFunctions:function(){var e=this;window.getSelectedVideoVariant=function(){return""},window.getVideoQuality=function(){return e.mediaProperties.qualitat},window.getVideoFormat=function(){return e.mediaProperties.format},window.isSubtitleEnabled=function(){return!!e.subtitlesProperties&&"off"!==e.subtitlesProperties.tracks[e.subtitlesProperties.track].id},window.getSubtitlesDetail=function(){return window.getSubtitlesStatus()}},_shouldInitWindowFunctions:function(){return window.GLOBALCONFIGURATION.OVERWRITE_EVALUABLE_FUNCTIONS}}).constructor=t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";function e(e){this.videotagid=e,this.timebeforeseeking=0,this.lasttime=0,this.videoposter=null,this.bindings=[]}return(e.prototype={initialize:function(){},destroy:function(){},setPlaylist:function(e){this.parentPlaylist=e},addEventListener:function(e,t){this.virtualizedevents[e]?this.addVirtualizedCallback(e,t):-1!==_.indexOf(this.realevents,e)&&this.bindTo(this.video,e,t),this.updateVirtualizedEventProxy()},removeEventListener:function(e,t){this.virtualizedevents[e]?this.removeVirtualizedCallback(e,t):-1!==_.indexOf(this.realevents,e)&&this.unbindTo(this.video,e,t),this.updateVirtualizedEventProxy()},on:function(t,i){this.eventId=this.eventId||0,this.eventId=this.eventId+1;var n=this,s=this.eventId;return this.eventstoexecute[s]=function(e){try{i.apply(this,arguments)}catch(e){debug&&console.log("Error on "+t+" callback function "+e,"Playlist")}n.removeEventListener(t,n.eventstoexecute[s])},this.addEventListener(t,this.eventstoexecute[s]),s},off:function(e,t){this.removeEventListener(e,this.eventstoexecute[t])},addVirtualizedCallback:function(e,t){this.virtualizedevents[e].push(t)},removeVirtualizedCallback:function(e,t){var i=this.virtualizedevents[e].indexOf(t);-1!==i&&this.virtualizedevents[e].splice(i,1)},dispatchVirtualizedEvent:function(t,i){var n=[];(i=i||{}).type=t,_.each(this.virtualizedevents[t],function(e){n.push(e)},this),_.each(n,function(e){try{e(i)}catch(e){debug&&console.log("error dispatching event "+t+" --\x3e "+n,"Playlist")}},this)},dispatchEmulatedRealEvent:function(i,e){var t=_.compact(_.map(this.bindings,function(e){if(i===e.eventname)return e}));(e=e||{}).type=i,_.each(t,function(t){try{t.callback(e)}catch(e){debug&&console.log("error dispatching real event "+i+" --\x3e "+t.callback,"Playlist")}})},updateVirtualizedEventProxy:function(){var i=!1;_.each(this.virtualizedevents,function(e,t){"timeupdate"===t&&(i=0<e.length)},this),this.updateTimeupdateCallback(i)},updateTimeupdateCallback:function(e){if(e&&GLOBALCONFIGURATION){if(_.isUndefined(this.timeupdatecallback)){var t,i=this,n=0;t=function(){n=i.currentTime(),i.lasttime!==n&&(i.lasttime=n,i.dispatchVirtualizedEvent("timeupdate"))},this.timeupdatecallback=setInterval(t,GLOBALCONFIGURATION.TIMEUPDATEINTERVAL)}}else this.timeupdatecallback&&(clearInterval(this.timeupdatecallback),this.timeupdatecallback=void 0)},addClickEvent:function(){var e=this;this.videoposter=this.videoposter||$("videoposter");function t(){e.paused()?e.play():e.pause()}this.bindTo(this.videoposter,"click",t),this.bindTo(this.video,"click",t)},play:function(){debug&&console.log("Unimplemented method play")},pause:function(){debug&&console.log("Unimplemented method pause")},stop:function(){debug&&console.log("Unimplemented method stop")},src:function(){debug&&console.log("Unimplemented method src")},setBroadcastAdReplace:function(){debug&&console.log("Unimplemented method src")},hasAutoplayFeature:function(){return!1},delayed:function(e){this.delayedTime=e||null},canStartDelayed:function(){return!1},autoplay:function(){debug&&console.log("Unimplemented method autoplay")},paused:function(){return debug&&console.log("Unimplemented method paused"),!0},checkVideoPlayer:function(){return debug&&console.log("Unimplemented method checkVideoPlayer"),!0},checkMovileVendor:function(){return debug&&console.log("Unimplemented method checkMovileVendor"),!0},checkPlayable:function(e){var t,i=0,n=1,s=2,a=this.getSupportedFormats(),o=!1;if(e=_.isArray(e)?e[0]:e,!_.isString(e))return i;for(e=e.toLowerCase(),t=0;t<a.length;t+=1)if(-1!==e.indexOf(a[t])){o=!0;break}return o?s:n},getSupportedFormats:function(){return["mp4"]},controls:function(){return debug&&console.log("Unimplemented method controls"),!0},loading:function(e){if(e){document.getElementById("loading_video").style.display="block";this.loadingTextTimeout=setTimeout(function(){document.getElementById("loading_text").style.display="block"},1e4)}else clearTimeout(this.loadingTextTimeout),document.getElementById("loading_text").style.display="none",document.getElementById("loading_video").style.display="none"},poster:function(e){var t=this.videoposter||$("videoposter");this.videoposter.style.display="block",this.videoposter.innerHTML=""===e?"":"<img src='"+e+'\' width="100%" />',this.on("play",function(){t.innerHTML="",t.style.display="none"})},setSize:function(){return debug&&console.log("Unimplemented method setSize"),!0},setSAS:function(){return debug&&console.log("Unimplemented method setSAS"),!0},setVAST:function(){return debug&&console.log("Unimplemented method setVAST"),!0},initializeGoogIMA:function(){var e=this;this.imaAdapter=new GoogIMAAdapter({videoPlugin:this,adTagUrl:this.adVmapTagUrl,onSetupReady:function(){debug&&console.log("onSetupReady!!!")},onSetupError:function(){debug&&console.log("onSetupError")},onContentEnded:function(){debug&&console.log("contentComplete")},onPrerollLoaded:function(){e.AdTypeBeingPlayed="pre"},onPostrollLoaded:function(){e.AdTypeBeingPlayed="post"},onMidrollLoaded:function(){e.AdTypeBeingPlayed="mid"},onEnded:function(){debug&&console.log("ht5plug: GoogIMA onEnded"),e.loading(!1),e.dispatchVirtualizedEvent("ended")},onAdStart:function(){debug&&console.log("onAdStart"),e.dispatchVirtualizedEvent("sas_adstart",{adtype:e.AdTypeBeingPlayed})},onAdEnd:function(){debug&&console.log("onAdEnd"),e.dispatchVirtualizedEvent("sas_adend",{adtype:e.AdTypeBeingPlayed})},adEvents:{LOADED:function(){debug&&console.log("LOADED!!!")},STARTED:function(){e.loading(!1),debug&&console.log("STARTED - sas_adcreativitybegin /ABP: ",e.AdTypeBeingPlayed),e.dispatchVirtualizedEvent("play"),e.dispatchVirtualizedEvent("sas_adcreativitybegin",{adtype:e.AdTypeBeingPlayed})},COMPLETE:function(){debug&&console.log("COMPLETE - sas_adcreativityend/ABP: ",e.AdTypeBeingPlayed),e.dispatchVirtualizedEvent("sas_adcreativityend",{adtype:e.AdTypeBeingPlayed})},AD_ERROR:function(){debug&&console.log("AD_ERROR"),e.dispatchVirtualizedEvent("ad_error")},ALL_ADS_COMPLETED:function(){debug&&console.log("ALL_ADS_COMPLETED")}}})},fullscreen:function(){return debug&&console.log("Unimplemented method fullscreen"),!0},isFullscreen:function(){return debug&&console.log("Unimplemented method isFullscreen"),!0},getTextTracks:function(){return debug&&console.log("Unimplemented method getTextTracks"),[]},setTextTracks:function(){debug&&console.log("Unimplemented method setTextTracks")},getCurrentTimeSec:function(){return Math.round(this.currentTime()/1e3)},getTimeBeforeSeekingSec:function(){return Math.round(this.getTimeBeforeSeeking()/1e3)},getDurationSec:function(){return Math.round(this.getDuration()/1e3)},currentTime:function(){return debug&&console.log("Unimplemented method currentTime"),!0},getAudioTracks:function(){return debug&&console.log("Unimplemented method getAudioTracks"),[]},setAudioTrack:function(){debug&&console.log("Unimplemented method setAudioTrack")},getLastTime:function(){return this.lasttime},getLastTimeSec:function(){return Math.round(this.getLastTime()/1e3)},bindTo:function(e,t,i){e.addEventListener(t,i),this.bindings=this.bindings||[],this.bindings.push({target:e,eventname:t,callback:i})},getFormatByFile:function(e){return e.file.split(".").pop().split("?").shift()},bindOneTo:function(t,i,n){var s=this;this.bindTo(t,i,function e(){s.unbindTo(t,i,e),n.apply(this,arguments)})},unbindTo:function(t,i,n){var e=_.find(this.bindings,function(e){return e.target===t&&e.eventname===i&&e.callback===n}),s=_.indexOf(this.bindings,e);-1!==s&&(this.bindings[s].target.removeEventListener(this.bindings[s].eventname,this.bindings[s].callback),this.bindings.splice(s,1))},unbindAll:function(){this.bindings=this.bindings||[],_.each(this.bindings,function(e){e.target.removeEventListener(e.eventname,e.callback)}),this.bindings=[]}}).constructor=e}.apply(t,[]))||(e.exports=n)},function(e,t,i){"use strict";i.r(t);var n=i(3),s=i.n(n);i.d(t,"PlayerController",function(){return s.a});var a=i(1),o=i.n(a);i.d(t,"Cuepoints",function(){return o.a});var r=i(4),d=i.n(r);i.d(t,"MarkerHW",function(){return d.a});var l=i(2),u=i.n(l);i.d(t,"SubtitlesPlugin",function(){return u.a});var c=i(5),h=i.n(c);i.d(t,"VideoBasePlugin",function(){return h.a});var p=i(0),m=i.n(p);i.d(t,"VideoType",function(){return m.a})},function(e,t,i){var n,s;n=[i(8),i(9),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22)],void 0===(s=function(e,t,i,n,s,a,o,r,d,l,u,c){"use strict";function h(e){this.id=e,this.initialize()}return h.prototype={video:null,playlist:null,videoLoaded:!1,initialize:function(){null===this.video&&(this.video=new e(this.id)),null===this.playlist&&(this.playlist=new t(this.video)),_.isUndefined(this.vastEventManager)&&(this.vastEventManager=!1,this.vastEventManager=new i(this)),_.isUndefined(this.siteCatalystManager)&&(this.siteCatalystManager=!1,this.siteCatalystManager=new n(this)),_.isUndefined(this.sharedManager)&&(this.sharedManager=!1,this.sharedManager=new s(this)),_.isUndefined(this.heartbeatsManager)&&(this.heartbeatsManager=!1,this.heartbeatsManager=new a(this)),_.isUndefined(this.comscoreManager)&&(this.comscoreManager=!1,this.comscoreManager=new o(this)),_.isUndefined(this.youboraManager)&&(this.youboraManager=!1,window.youbora&&youbora.adapters&&youbora.adapters.CCMAGeneric?this.youboraManager=new d(this):this.youboraManager=new r(this)),_.isUndefined(this.markerHWManager)&&(this.markerHWManager=!1,this.markerHWManager=new l(this)),_.isUndefined(this.kantarstManager)&&(this.kantarstManager=!1,this.kantarstManager=new u(this)),_.isUndefined(this.resumeManager)&&(this.resumeManager=!1,this.resumeManager=new c(this))},loadVideo:function(e,t){var i=this;this.videoLoaded?this.onVideoReloaded(function(){i.initializeManagersAndPlaylist(e,t)}):this.initializeManagersAndPlaylist(e,t)},initializeManagersAndPlaylist:function(e,t){var i=this;this.videoLoaded=!0,this.vastEventManager.initialize(),this.sharedManager.initialize(t),this.siteCatalystManager.initialize(t.siteCatalystModel),this.heartbeatsManager.initialize(t.heartbeatsModel),this.comscoreManager.initialize(t.comscoreModel),this.youboraManager.initialize(t.youboraModel,e.videourl,t),this.markerHWManager.initialize(t.matrModel),this.kantarstManager.initialize(t.kantarModel),this.playlist.setRelatedData(t.relatedModel),this.playlist.setRelatedEditorData(t.relatedEditorModel),this.resumeManager.initialize(t),this.waitForInitializations(function(){i.playlist.create({videourl:e.videourl,videourlvad:e.videourlvad,adserverurl:e.adserverurl,autoplay:e.autoplay,startTime:i.resumeManager.getStartTime()||e.startTime,meta:t}),i.playlist.setYouboraData(i.youboraManager.getData()),i.playlist.init()})},waitForInitializations:function(e){function t(){clearTimeout(i),$("#"+s)[0]&&!a?(a=!0,e()):++o<=20&&setTimeout(t,100)}var i,n=this,s=this.id,a=!1,o=0;i=setTimeout(t,7e3),window.Promise?new Promise(function(e){window.Matr?window.Matr.Prepare(e):e()}).then(function(){n.resumeManager.checkStartTimeFromLib().then(t)}):window.Matr.Prepare(t)},onVideoReloaded:function(e){var t=this;if(this.playlist){this.playlist.on("playlistend",function(){setTimeout(function(){t.resetManagers(e)},0)}),this.playlist.stop()}else this.resetManagers(e)},resetManagers:function(e){this.vastEventManager&&this.vastEventManager.dispose(),this.siteCatalystManager&&this.siteCatalystManager.dispose(),this.heartbeatsManager&&this.heartbeatsManager.dispose(),this.comscoreManager&&this.comscoreManager.dispose(),this.resumeManager&&this.resumeManager.dispose(),this.youboraManager&&this.youboraManager.dispose(),this.markerHWManager&&this.markerHWManager.dispose(),this.kantarstManager&&this.kantarstManager.dispose(),e&&e()},changeMeta:function(e){this.playlist&&this.playlist.changeMeta(e)},addEventListener:function(e,t){this.playlist&&this.playlist.addEvent(e,t)},removeEventListener:function(e,t){this.playlist&&this.playlist.removeEvent(e,t)},destroy:function(){this.video&&this.video.dispatchVirtualizedEvent("sourceunload"),this.resetManagers(),this.playlist&&(this.playlist.destroy(),this.playlist=null),this.video=null},sendCommand:function(){var e,t;if(t=(e=_.toArray(arguments)).splice(0,1),this.playlist&&this.playlist[t])return this.playlist[t].apply(this.playlist,e)}},h}.apply(t,n))||(e.exports=s)},function(e,t){e.exports=i},function(e,t,i){var n,s;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=[i(1),i(10),i(2),i(0),i(12)],void 0===(s=function(s,e,i,l,u){"use strict";var r={TYPE:"TCOUT",OFFSETTIME:-300};function t(e){this.video=e,this.video.setPlaylist(this),this.bindings=[],this.resetValues(),this.callbackfunctions={audioTrackChanged:[],playliststart:[],playlistend:[],playlistready:[],changevideo:[],timeupdate:[],play:[],pause:[],buffering:[],buffered:[],volumechange:[],canskipad:[],casting:[],resetTrackEvents:[],ended:[],seeking:[],seek:[],seeked:[],vastparsed:[],vasterror:[],adtimeupdate:[],mute:[],unmute:[],fullscreen:[],skip:[],error:[],loadedmetadata:[],progress:[],destroy:[],sas_adstart:[],sas_adend:[],sas_adcreativitybegin:[],sas_adcreativityend:[],mediatimeout:[],quality:[],"related-playlist-loaded":[],"related-playlist-show":[],"related-playlist-close":[],"related-playlist-click":[],subtitlesinit:[],subtitleschange:[],subtitlesdisabled:[],recoveringfrommidroll:[],recoveredfrommidroll:[],openPopup:[],startOver:[],ready:[],sourceunload:[]}}return t.prototype={videourl:"",index:0,fs:!1,autoplay:!0,adserverurl:{},adpreenabled:!0,video:null,elements:[],originalelements:[],endcallbackfunction:null,stopped:!0,analitycevents:{playpausecallback:null},meta:{idInt:"",poster:"",etic:"",isLive:null,durada:0,duradaFixa:!1},ended:!1,resetValues:function(){this.videourl="",this.unbindAll(),this.index=0,this.ended=!1,this.adserverurl={},this.autoplay=!0,this.elements=[],this.originalelements=[],this.ad={pre:[],mid:[],post:[]},this.meta={idInt:"",poster:"",etic:"",isLive:null,durada:0,duradaFixa:!1,titol:"",subtitol:"",data:"",categoriaRanking:"",categoriaTematica:"",tipusContingut:""}},create:function(e){var i=this;this.cuepoints=new s,this.resetValues(),this.video.initialize(),this.videourl=e.videourl,this.videourlvad=e.videourlvad,this.adserverurl=e.adserverurl,this.autoplay=e.autoplay||!1,this.percentageViewed=this._getPercentageViewed(e.startTime,e.meta.durada),this.startTime=this._getStartTime(e.startTime,e.meta.durada,this.percentageViewed),this.meta=e.meta;function t(e){n.avoidMarks||n.dispatchEvent(e.type,e)}var n=this;this.videoCallbacks={ended:function(){n.onVideoEnd()},timeupdate:function(){var e=n.video.currentTime();n.video.video.getConfig&&"DVR"===n.video.video.getConfig().streamType&&e<-1&&-3e4<e&&(e=0),void 0!==n.elements[n.index-1]&&(n.elements[n.index-1].type===l.VIDEO?(n.dispatchEvent("timeupdate",{ms:e}),n.cuepoints.checkCuepoints(e)):(n.dispatchEvent("adtimeupdate",{ms:e}),n.adcuepoints&&n.adcuepoints.checkCuepoints(e)))},progress:function(){n.elements[n.index-1].type===l.VIDEO&&n.dispatchEvent("progress")},error:function(){n.adpreenabled=!1,n.elements[n.index-1].type!==l.VIDEO&&n.playNextElement(!0)},mediatimeout:function(){n.elements[n.index-1].type===l.VIDEO?n.dispatchEvent("error",{msg:"Contingut temporalment no disponible"}):n.onVideoEnd()},replay:function(){n.stopped=!1,n.ended=!1,n.index=0,n.actualVideo={delayed:null,autoplay:n.elements[n.index].autoplay,src:n.elements[n.index].url,controls:!0,type:l.VIDEO,poster:n.meta.poster,meta:n.meta},n.index=n.index+1,n.dispatchEvent("playliststart"),n.dispatchEvent("changevideo",n.actualVideo),n.dispatchEvent("loadedmetadata"),n.video.replay&&n.video.replay()},canplay:function(){n.video.playWhenOnReady&&n.dispatchEvent("ready")}},_.each(["audioTrackChanged","play","pause","buffering","buffered","ended","seeking","seek","seeked","mute","unmute","vastparsed","fullscreen","error","volumechange","loadedmetadata","sas_adstart","sas_adend","sas_adcreativitybegin","sas_adcreativityend","casting","mediatimeout","quality","related-playlist-loaded","related-playlist-show","related-playlist-close","related-playlist-click","subtitlesinit","subtitleschange","subtitlesdisabled","openPopup","startOver","ready","sourceunload"],function(e){i.bindTo(i.video,e,t)}),_.each(this.videoCallbacks,function(e,t){i.bindTo(i.video,t,e)}),this.changeVideo({autoplay:!1,src:"",controls:!1,poster:this.meta.poster})},init:function(){this.prepare()},changeMeta:function(e){this.meta=_.extend(this.meta,e)},destroy:function(){this.dispatchEvent("destroy",this.meta),this.stop(),this.resetValues(),this.video.destroy(),this.video=null},skip:function(){this.pause(),this.playNextElement(!0)},seeking:function(){this.dispatchEvent("seeking")},seeked:function(){this.dispatchEvent("seeked")},createReturnMidrollCallback:function(a,t){var o=this;return function(e,i){var n,s=0;s="TCOUT"===r.TYPE?t:"ONGO"===r.TYPE?o.video.currentTime():i.ms,s+=r.OFFSETTIME,n=a.url,o.elements.splice(o.index,0,a,o.createPlaylistElement({autoplay:!1,delayed:s})),o.onAdFetchDelayed=function(e,t){if(e&&e.videoAdURL)o.delayedStartTimeCallback&&o.removeEvent("changevideo",o.delayedStartTimeCallback),o.delayedStartTimeCallback=function(){o.elements[t].type===l.VIDEO&&(i.timestopass=2,o.avoidMarks=!0,o.dispatchEvent("recoveringfrommidroll"),o.video.on("loadedmetadata",function(){o.video.on("seeked",function(){o.avoidMarks=!1,o.dispatchEvent("recoveredfrommidroll"),o.dispatchEvent("play")}),o.video.canStartDelayed&&!0===o.video.canStartDelayed()||o.video.currentTime(s,!0),a.url=n}))},o.addEvent("changevideo",o.delayedStartTimeCallback),o.index=o.index+1,o.onAdFetch(e,t);else for(;o.index=o.index+1,o.elements[o.index-1].type!==l.VIDEO;);o.onAdFetchDelayed=null},o.getAd(o.index)}},prepare:function(){var e,t,i;if(this.video.setYoubora&&this.video.setYoubora(this.youboraData),this.video.setRelated&&this.video.setRelated(this.relatedData),this.video.setEditorRelated&&this.video.setEditorRelated(this.relatedEditorData),this.adserverurl.custom){var n=this.adserverurl.custom.skipoffset;this.adpreenabled&&this.manageCustomAd(u.PRE,n),this.elements.push(this.createPlaylistElement({autoplay:!0})),this.manageCustomAd(u.MID,n),this.manageCustomAd(u.POST,n)}else{if(this.adserverurl.vast)if(this.video.vastvideoDefaultData){if(this.adserverurl.events&&this.video.setAdError&&(e=this.adserverurl.events.adError.ad_tag_empty,this.video.setAdError(e)),this.adserverurl.vast.schedule&&"object"===a(this.adserverurl.vast.schedule))for(t=[],Object.keys(this.adserverurl.vast.schedule).forEach(function(e){t.push(e)}),i=0;i<t.length;i+=1){0<this.startTime&&("pre"===t[i]||this.startTime>1e3*this.adserverurl.vast.schedule[t[i]].offset)&&delete this.adserverurl.vast.schedule[t[i]]}this.video.setVAST(this.adserverurl.vast)}else this.video.setImaNode&&this.adserverurl.vast.schedule&&"object"===a(this.adserverurl.vast.schedule)&&this.video.setImaNode(this.adserverurl.vast.schedule);this.adserverurl.sas&&this.video.setSAS(this.adserverurl.sas),this.adserverurl.broadcast&&this.video.setBroadcastAdReplace(this.adserverurl.broadcast)}0===this.elements.length&&this.elements.push(this.createPlaylistElement({autoplay:!0})),this.originalelements=JSON.parse(JSON.stringify(this.elements)),this.meta.elements=this.elements,this.meta.startTime=this.startTime,this.meta.percentageViewed=this.percentageViewed,this.dispatchEvent("playlistready",this.meta),(this.autoplay||this.startTime&&this.video.nativeAutoPlay)&&this.start()},manageCustomAd:function(e,t){for(var i=this.adserverurl.custom[e],n=t?t[e]:null,s=e===u.MID,a=0;a<i.length;a++){var o=i[a],r=n?n[a]:null,d=this.createPlaylistElement({type:l.AD,adtype:e,url:this.appendIabParams(s?o.url:o),duration:0,skipOffset:r?r.skipoffset:null});s?this.cuepoints.addCuepoint({ms:1e3*o.time,once:!0,callback:this.createReturnMidrollCallback(d,1e3*o.tcout)}):this.elements.push(d)}},appendIabParams:function(e){return window.smartDeviceInfo&&window.smartDeviceInfo.iabStoreId&&(e=e+"&buid="+window.smartDeviceInfo.iabStoreId),window.Didomi&&(e=e+"&rnd="+Math.floor(1e3*Math.random())+"&gdpr=1&gdpr_consent="+Didomi.getUserStatus().consent_string),e},createPlaylistElement:function(e){return(e=e||{}).url=void 0!==e.url?e.url:this.videourl,e.type=void 0!==e.type?e.type:l.VIDEO,e.autoplay=void 0===e.autoplay||e.autoplay,e.duration=void 0!==e.duration?e.duration:this.meta.durada,e},getAd:function(t){var i=this;e.get({url:this.elements[t].url,skipOffset:this.elements[t].skipOffset,onSucces:function(e){i.dispatchEvent("resetTrackEvents"),i.onAdFetchDelayed?i.onAdFetchDelayed(e,t):i.onAdFetch(e,t)},onError:function(e){i.dispatchEvent("vasterror",{ads:i.adserverurl,error:e}),i.onAdFetchDelayed?i.onAdFetchDelayed(null,t):i.onAdFetch(null,t,e.isLast)}})},onAdFetch:function(e,t,i){var n=this.elements.length-1,s="post"===this.elements[n].adtype?this.elements.pop():void 0,a=this.elements.pop(),o=this.elements.pop();if(window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch"),e&&e.videoAdURL)if(this.dispatchEvent("vastparsed",e),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a"),t===n){window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.1");var r={url:e.videoAdURL,adtype:s.adtype,autoplay:s.autoplay,clickThrough:e.clickThrough,trackingEvents:e.trackingEvents,impressions:e.configuration.impressions,duration:e.duration,skipOffset:e.skipOffset,type:s.type};o&&(this.elements.push(o),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.1.1")),this.elements.push(a),this.elements.push(r),!1===e.isLast&&(this.elements.push(s),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.1.2")),void 0!==e.isLast&&!e.isLast||(this.playElement(t),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.1.3"))}else{window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.2");r={url:e.videoAdURL,adtype:o.adtype,autoplay:o.autoplay,clickThrough:e.clickThrough,trackingEvents:e.trackingEvents,impressions:e.configuration.impressions,duration:e.duration,skipOffset:e.skipOffset,type:o.type};this.elements.push(r),!1===e.isLast&&(this.elements.push(o),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.2.1")),this.elements.push(a),s&&(this.elements.push(s),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.2.1")),void 0!==e.isLast&&!e.isLast||(this.playElement(t),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-a.2.1"))}else e&&!e.videoAdURL&&e.isLast||void 0===i||i?(window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-b"),this.elements.push(a),s&&(this.elements.push(s),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-b.1")),(n=this.elements.length-1)<t&&(t=n,window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-b.2"))):(this.elements.push(a),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-C"),s&&(this.elements.push(s),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-C.1")),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-onAdFetch-C-PlayElement")),this.playElement(t)},start:function(){this.startFromStartTime(),this.startTime=0},startFromStartTime:function(){this.stopped=!1,this.ended=!1,this.index=0,this.startTime&&(this.index=this.getFirstVideoElementIndex(),this.elements[this.index].delayed=this.startTime,this.elements[this.index].autoplay=!1),this.dispatchEvent("playliststart"),this.playNextElement()},startFromBeginning:function(){this.startTime=0,this.startFromStartTime()},getFirstVideoElementIndex:function(){var e=0;return-1===(e=_.indexOf(this.elements,_.find(this.elements,function(e){return e.type===l.VIDEO})))&&(e=0),e},fullscreen:function(e){this.video.fullscreen(e)},play:function(){this.hasStarted()?this.video&&!this.video.playWhenOnReady&&this.video.play():this.start()},forcePlay:function(){this.video&&this.video.play()},activaAud:function(){this.video.activaAud()},activaAudNoPlay:function(){this.video.activaAudNoPlay()},desactivaAud:function(){this.video.desactivaAud()},getCurrentAudioTrack:function(){return this.video.getCurrentAudioTrack()},setCurrentAudioTrack:function(e){this.video.setCurrentAudioTrack(e)},hasStarted:function(){return!(this.ended||0===this.index)},activeSubtitles:function(e,t){this.subt=this.subt||new i(e,this),this.subt.el=e,this.subt.load(this.cuepoints,t)},clearSubtitles:function(){this.subt&&this.subt.clearSubtitlesDiv()},deactiveSubtitles:function(){this.subt&&this.subt.unload()},setPersonalizationActivationSubtitles:function(e){this.subt&&this.subt.setPersonalizationActivation(e)},setSubtitlesBackgroundPersonalized:function(e){this.subt&&this.subt.setBackgroundPersonalized(e)},setSubtitlesPositionPersonalized:function(e){this.subt&&this.subt.setPositionPersonalized(e)},setSubtitlesFontSizePersonalized:function(e){this.subt&&this.subt.setFontSizePersonalized(e)},volume:function(e){return this.video.volume(e)},mute:function(e){this.video.mute(e)},isMute:function(){return this.video.muted()},getFS:function(){return this.fs},setFS:function(e){this.fs=e,this.dispatchEvent("fullscreen",e)},setSize:function(e){this.video.setSize(e)},pause:function(){this.video&&this.video.pause()},paused:function(){return this.video.paused()},isStopped:function(){return this.stopped},isLive:function(){return this.meta.isLive},buffered:function(){return this.video&&this.video.getBuffered()},getDuration:function(){return this.elements[this.index-1]&&this.elements[this.index-1].type===l.AD||!this.meta.duradaFixa?this.video&&this.video.getDuration?this.video.getDuration():this.getTheoricalCurrentElementDuration():this.meta.durada},getTheoricalCurrentElementDuration:function(){var e;return this.elements&&this.elements[this.index-1]&&(e=this.elements[this.index-1].duration),_.isNumber(e)?e:this.meta.durada},getDurationSec:function(){return this.video&&this.video.getDuration?this.video.getDurationSec():this.getTheoricalCurrentElementDuration()/1e3},getAudioTracks:function(){return this.video.getAudioTracks()},setAudioTrack:function(e){this.video.setAudioTrack(e)},getAvailableAudioTrack:function(){return this.video.getAvailableAudioTrack()},getTimeBeforeSeeking:function(){return this.video.getTimeBeforeSeeking()},getTimeBeforeSeekingSec:function(){return this.video.getTimeBeforeSeekingSec()},getLastTime:function(){return this.video.getLastTime()},getLastTimeSec:function(){return this.video.getLastTimeSec()},currentTime:function(e,t){if(this.elements[this.index-1]&&this.elements[this.index-1].type===l.AD&&!t&&(e=void 0),void 0!==e&&"number"!=typeof e){var i,n="+"===e[0],s=parseInt(e.substring(1),10),a=parseInt(this.meta.durada,10);s=parseInt(a/100*s,10),i=parseInt(this.video.currentTime(),10),e=n?i+s:i-s,e=!n&&e<0?1:e,"number"!=typeof(e=n&&a<e?a:e)&&(e=void 0)}return this.video?this.video.currentTime(e):0},getCurrentTimeSec:function(){return this.video&&this.video.getCurrentTimeSec()},getTextTracks:function(){return this.video&&this.video.setTextTracks?this.video.getTextTracks():null},setTextTracks:function(e){return this.video&&this.video.setTextTracks?this.video.setTextTracks(e):null},getViewMode:function(){return this.video&&this.video.getViewMode?this.video.getViewMode():null},stop:function(){this.stopped=!0,this.playListEnd(),this.index=0,this.video&&(this.video.stop?this.video.stop():this.video.pause()),null!==this.playdelay&&clearTimeout(this.playdelay)},playNextElement:function(e){window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playNextElement: "+e),e&&(this.dispatchEvent("skip"),this.dispatchEvent("ended"));var t=this.index;this.index=this.index+1,this.checkPlayable(t)},playElement:function(e){window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playElement: "+e);this.elements[e].type===l.AD?this.playAD(e):this.playVideo(e)},playAD:function(e){window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playAD: "+e);var t=this.elements[e].url,i=this.elements[e].clickThrough,n=this.elements[e].trackingEvents,s=this.elements[e].impressions,a=this.elements[e].skipOffset,o=this.elements[e].duration,r=this.elements[e].adtype,d=this;r!==u.PRE&&(window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playAD-1"),d.dispatchEvent("pause")),r!==u.POST&&(window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playAD-2"),this.createAdCuepoints(),this.changeVideo({autoplay:!0,controls:!1,poster:r===u.PRE?"Images/pre-message.jpg":"Images/mid-message.jpg",message:!0,type:l.AD,adtype:r,clickThrough:i,trackingEvents:n,impressions:s,skipOffset:a,duration:o})),this.playdelay=setTimeout(function(){window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playAD-playdelay"),d.changeVideo({autoplay:!0,controls:!1,src:t,type:l.AD,adtype:r,clickThrough:i,trackingEvents:n,impressions:s,skipOffset:a,duration:o})},3e3)},playVideo:function(e){window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playVideo: "+e),null!==this.playdelay&&(window.debug&&console.log("PLAYER_TEST: VideoPlaylist-playVideo: clear playdelay"),clearTimeout(this.playdelay));function t(){a.changeVideo({adtype:"",delayed:n,autoplay:s,src:i,controls:!0,type:l.VIDEO,poster:a.meta.poster})}var i=this.elements[e].url,n=this.elements[e].delayed||null,s=this.elements[e].autoplay,a=this;"CE_18"===this.meta.etic?(this.changeVideo({adtype:"",autoplay:!0,src:"",controls:!0,message:!0,poster:"Images/18-message.jpg"}),this.playdelay=setTimeout(function(){t()},3e3)):t(),!this.meta.isLive&&(_.isUndefined(this.meta.durada)||"NaN"===this.meta.durada||_.isNaN(this.meta.durada)||this.meta.durada<=0)&&this.video.on("loadedmetadata",function(){setTimeout(function(){a.meta.durada=Math.floor(a.getDuration()),a.dispatchEvent("changevideo",a.actualVideo)},300)})},changeVideo:function(e){var i=this;if(window.debug&&console.log("PLAYER_TEST: VideoPlaylist-changeVideo-url: "+e.src),!this.stopped){window.debug&&console.log("PLAYER_TEST: VideoPlaylist-changeVideo-2");var n=!1;_.each(e,function(e,t){if("autoplay"!==t){if(void 0!==i.video[t])try{i.video[t](e),window.debug&&console.log("PLAYER_TEST: VideoPlaylist-changeVideo-key: "+t)}catch(e){}}else n=e}),!this.video.hasAutoplayFeature()&&n&&(this.video.off("loadedmetadata",this.loadedMetadataListenerId),this.loadedMetadataListenerId=this.video.on("loadedmetadata",_.bind(this.loadedmetadataHandler,this))),e.meta=this.meta,this.actualVideo=e,(this.meta.isLive||0<this.meta.durada||0!==this.actualVideo.type)&&this.dispatchEvent("changevideo",e)}},loadedmetadataHandler:function(){this.stopped||this.video.playWhenOnReady||this.video.play()},getActualVideo:function(){return this.actualVideo},onVideoEnd:function(){this.playNextElement()},createAdCuepoints:function(){this.adcuepoints?this.adCue&&this.adcuepoints.removeCuepoint(this.adCue):this.adcuepoints=new s;var e=this;this.adCue=this.adcuepoints.addCuepoint({ms:15e3,callback:function(){e.dispatchEvent("canskipad"),e.adCue&&e.adcuepoints.removeCuepoint(e.adCue)}})},checkPlayable:function(e){if(e>=this.elements.length)this.playListEnd();else{window.debug&&console.log("PLAYER_TEST: VideoPlaylist-checkPlayable: "+e);var t,i=1,n=2,s=this.video.checkPlayable(this.elements[e].url);s===n?this.playElement(e):s===i?this.getAd(e):(this.index>=this.elements.length&&(t=this,setTimeout(function(){t.dispatchEvent("error",{msg:"Contingut temporalment no disponible"})},200)),this.playNextElement())}},checkVideoPlayer:function(){var e=this.video.checkVideoPlayer();return"native"===e?"HTML5":e},checkMovileVendor:function(){return this.video.checkMovileVendor()},playListEnd:function(){this.index=0,this.ended=!0,this.elements=JSON.parse(JSON.stringify(this.originalelements)),this.changeVideo({autoplay:!1,src:"",controls:!1,poster:this.meta.poster}),this.dispatchEvent("playlistend",{finished:!this.stopped})},setYouboraData:function(e){this.youboraData=e},setRelatedData:function(e){this.relatedData=e},setRelatedEditorData:function(e){this.relatedEditorData=e},_getPercentageViewed:function(e,t){return(e||0)/t*100},_getStartTime:function(e,t,i){var n=(t-e)/1e3;return 95<=i&&n<=10||n<3?0:e},bindTo:function(e,t,i){e.addEventListener(t,i),this.bindings.push({target:e,eventname:t,callback:i})},unbindAll:function(){_.each(this.bindings,function(e){e.target.removeEventListener(e.eventname,e.callback)})},on:function(e,t){void 0===this.eventstoexecute&&(this.eventstoexecute=[]);var i=this.eventstoexecute.length,n=this;this.eventstoexecute[i]=function(){t(),n.removeEvent(e,n.eventstoexecute[i]),this.eventstoexecute[i]=null},this.addEvent(e,this.eventstoexecute[i])},addEvent:function(e,t){if(void 0===this.callbackfunctions[e])return null;this.callbackfunctions[e].push(t)},removeEvent:function(e,t){try{var i=this.callbackfunctions[e].indexOf(t);if(-1===i)return;this.callbackfunctions[e].splice(i,1)}catch(e){}},dispatchEvent:function(e,t){var i=this.callbackfunctions[e],n={type:e,params:t};_.each(i,function(e){try{e(n)}catch(e){}})}},t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(11)],void 0===(s=function(a){"use strict";function r(){f=0,u=(h=u<=c)?null:u,c=h?1:c+1,v=!h&&v}var d,l,o,u,c,h,p="900",m="303",g={timeout:"301",error:p,parsererror:"100",vastempty:m,vasterror:"400"},v=!1,f=0;return d={get:function(i){var e,t,n,s=(new Date).getTime();-1!==i.url.indexOf("smartadserver")&&(i.url=i.url.replace("[timestamp]",s).replace("$(tmstmp)",s).replace("[target]",1).replace("$(uid)",window.getAdDeviceUID())),-1!==i.url.indexOf("smartclip")&&(i.url=i.url.replace("[random]",Math.floor(1e3*Math.random()))),e=function(e){window.debug&&console.log("PLAYER_TEST: AdGetter-successCallback-1");e=a.parserFromString(e).VAST;var t=_.isArray(e.Ad)?e.Ad:[e.Ad];u=u||t.length,c=c||1,v&&1<t.length&&(t=[t[0]]),window.debug&&console.log("PLAYER_TEST: AdGetter-successCallback-2"),_.each(t,function(e){var t;try{if(null!==(t=new o({Ad:e})).response&&_.isUndefined(t.response.Error)&&!_.isUndefined(t.response.Ad))return void t.parse(i)}catch(e){}try{if(t.response.Error||_.isUndefined(t.response.Ad))return i.errorTag=_.union(t.getErrorList(t.response.Error),i.errorTag),r(),void i.onError.call(i.scope,{code:m,urls:i.errorTag,isLast:h})}catch(e){}r(),i.onError.call(i.scope,{code:p,urls:i.errorTag,isLast:h})})},n={url:i.url,dataType:"text",timeout:5e3,proxy:!1,success:e,onSuccess:e,onError:function(){r(),i.onError.call(i.scope,{code:p,urls:i.errorTag,isLast:h})},complete:function(e,t){"timeout"!==t&&"error"!==t&&"parsererror"!==t&&"vasterror"!==t||(r(),i.onError.call(i.scope,{code:g[t],urls:i.errorTag,isLast:h}))}},$.ajax?t=$.ajax:(t=_.bind(ajaxLib.getAJAXResponse,ajaxLib),n=_.extend(n,{type:"text"})),t(n)}},((l=function(e){this.response=e,this.response.Ad=_.isArray(this.response.Ad)?this.response.Ad[0]:this.response.Ad}).prototype={setAdURL:function(e){this.videoAdURL=e},getAdURL:function(){return this.videoAdURL},setClickThrough:function(e){this.clickThrough=e},setTrackEvent:function(e){this.configuration.trackingEvents?this.trackingEvents=_.union(e,this.configuration.trackingEvents):this.trackingEvents=e},parse:function(){var e,t,i,n=!1;_.isString(this.videoAdURL)&&(i=this.videoAdURL.toLowerCase(),n=!!_.find([".mp4",".mp3",".m3u8",".m3u"],function(e){return-1!==i.indexOf(e)})),n?-1!==(t=this.videoAdURL.indexOf("mp4:"))&&(e=t+4,this.videoAdURL=this.videoAdURL.substring(e,this.videoAdURL.length),this.videoAdURL=URLS.BASEADVIDEOIP+this.videoAdURL):this.videoAdURL=null,this.configuration.onSucces.call(this.configuration.scope,this)}}).constructor=l,o=function(e){l.prototype.constructor.call(this,e)},_.extend(o.prototype,l.prototype,{parse:function(e){var t,i,n,s,a,o;this.configuration=e;try{t=!!this.response.Ad.Wrapper}catch(e){t=!1}if(!t){window.debug&&console.log("PLAYER_TEST: AdGetter-parse-noWrapper: "+h),r(),this.isLast=h,this.getImpressions(),this.getTrackingEvents(),this.getDuration(),this.getSkipOffset(e.skipOffset),this.checkSkipOffset(),this.getErrorMark("InLine"),n=i=null,s=-1;try{(n=this.getLinearHelper()).Linear.VideoClicks&&(-1===(s=(i=n.Linear.VideoClicks.ClickThrough["#cdata-section"]).indexOf("http://"))&&(s=i.indexOf("https://")),-1!==s&&(i=i.substring(s)),this.setClickThrough(i))}catch(e){}try{(n=n||this.getLinearHelper()).Linear.MediaFiles&&(o=n.Linear.MediaFiles.MediaFile,a=null,_.isArray(o)?(o=_.filter(o,function(e){var t=e["@attributes"];return t&&("video/mp4"===t.type||"audio/mp3"===t.type||"video/mpeg"===t.type)})).length&&(a=(o=o[0])["#cdata-section"]):!o["@attributes"]||"video/mp4"!==o["@attributes"].type&&"audio/mp3"!==o["@attributes"].type&&"video/mpeg"!==o["@attributes"].type||(a=o["#cdata-section"]),GLOBALCONFIGURATION&&GLOBALCONFIGURATION.WHITELIST&&GLOBALCONFIGURATION.WHITELIST.DOMAINS&&!new RegExp(GLOBALCONFIGURATION.WHITELIST.DOMAINS).test(a.split("/")[2])||this.setAdURL(a))}catch(e){}return l.prototype.parse.call(this)}window.debug&&console.log("PLAYER_TEST: AdGetter-parse-hasWrapper: "+f),v=!0,f+=1,this.configuration.url=this.response.Ad.Wrapper.VASTAdTagURI["#cdata-section"],this.getErrorMark("Wrapper"),this.getImpressionsWrapper(),this.getTrackingEventsWrapper(),null!==this.configuration.url&&f<=5?(this.trackingEvents&&(this.configuration.trackingEvents=this.trackingEvents),d.get(this.configuration)):(r(),this.configuration.onError.call(this.configuration.scope,{code:p,urls:this.configuration.errorTag,isLast:h}))},getErrorList:function(e){var t,i=[];try{e=_.isArray(e)?e:[e],_.each(e,function(e){(t=e["#cdata-section"]||e["#text"])&&i.push(t.replace("[timestamp]",(new Date).getTime()))})}catch(e){}return i},getErrorMark:function(e){e=e||"InLine";try{!_.isUndefined(this.response.Ad)&&this.response.Ad[e].Error?this.configuration.errorTag=this.getErrorList(this.response.Ad[e].Error):"Error"===e&&this.response.Error&&(this.configuration.errorTag=this.getErrorList(this.response.Error))}catch(e){}},getImpressionsWrapper:function(){this.getImpressions("Wrapper")},getTrackingEventsWrapper:function(){this.getTrackingEvents("Wrapper")},getImpressions:function(e){var t,i;e=e||"InLine";try{this.response.Ad[e].Impression&&(t=_.isArray(this.response.Ad[e].Impression)?this.response.Ad[e].Impression:[this.response.Ad[e].Impression],_.each(t,function(e){(i=e["#cdata-section"]||e["#text"])&&(i=i.replace("[timestamp]",(new Date).getTime()),void 0===this.configuration.impressions&&(this.configuration.impressions=[]),this.configuration.impressions.push(i))},this))}catch(e){}},getTrackingEvents:function(e){e=e||"InLine",this.trackingEvents=this.trackingEvents||this.configuration.trackingEvents||[];try{var t=this.getLinearHelper(e);t.Linear.TrackingEvents&&this.setTrackEvent(t.Linear.TrackingEvents.Tracking)}catch(e){}},getLinearHelper:function(e){e=e||"InLine";try{var t=_.isArray(this.response.Ad[e].Creatives.Creative)?this.response.Ad[e].Creatives.Creative:[this.response.Ad[e].Creatives.Creative];return _.find(t,function(e){return e.Linear})}catch(e){throw"no VAST Linear"}},getDuration:function(e){e=e||"InLine",this.duration=this.duration||2e4;try{var t=this.getLinearHelper(e).Linear.Duration["#text"];t&&(this.duration=this.getMillisFromString(t))}catch(e){}},getSkipOffset:function(e){if(e)this.skipOffset=1e3*e;else try{var t=this.getLinearHelper("InLine").Linear["@attributes"].skipoffset;t&&(this.skipOffset=this.getMillisFromString(t))}catch(e){}},checkSkipOffset:function(){this.skipOffset>=this.duration&&(this.skipOffset=void 0)},getMillisFromString:function(e){var t=e.split(":");return 1e3*(3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2]))}}),o.prototype.constructor=o,d}.apply(t,n))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";return{parserFromString:function(e){var t=this.transformTextToXMLObject(e);return this.parser(t)},parser:function(e){var t;try{(new Date).getTime(),t=this.transformXMLToJSON(e)}catch(e){}return t},transformTextToXMLObject:function(e){var t;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Msxml2.DOMDocument.3.0")).async=!1,t.loadXML(e)),t},transformXMLToJSON:function(e){var t,i,n,s,a,o,r,d={};if(1===e.nodeType){if(0<e.attributes.length)for(d["@attributes"]={},o=0;o<e.attributes.length;o+=1)r=e.attributes.item(o),d["@attributes"][r.nodeName]=r.nodeValue}else 3!==e.nodeType&&4!==e.nodeType||(d=e.nodeValue);if(e.hasChildNodes())for(a=0;a<e.childNodes.length;a+=1)i=(t=e.childNodes.item(a)).nodeName,n=this.transformXMLToJSON(t),void 0===d[i]?"\n"!==n&&(d[i]=n):(void 0===d[i].push&&"\n"!==(s=d[i])&&(d[i]=[],d[i].push(s)),"\n"!==n&&d[i].push(n));return d}}}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";return{PRE:"pre",MID:"mid",POST:"post"}}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(n){"use strict";function e(e){this.videoManager=e}return(e.prototype={videoevents:["vastparsed","vasterror","play","ended","pause","resume","mute","unmute","fullscreen","skip","resetTrackEvents","destroy"],vastEventDictionary:{play:"start",firstQuartile:"firstQuartile",midpoint:"midpoint",thirdQuartile:"thirdQuartile",ended:"complete",pause:"pause",resume:"resume",mute:"mute",unmute:"unmute",fullscreen:"fullscreen",skip:"skip"},boolStartSent:!1,firstQuartileSent:!1,midpointSent:!1,thirdQuartileSent:!1,boolEndSent:!1,isAdPaused:!1,initialize:function(){this.basicSetup(),this.eventHandler=_.bind(this.eventHandler,this),this.adtimeUpdateHandler=_.bind(this.adtimeUpdateHandler,this),this.registerListeners()},basicSetup:function(){this.resetMeta()},resetMeta:function(){this.meta={trackingEvents:{},impressions:{}},this.boolStartSent=!1,this.boolEndSent=!1,this.isAdPaused=!1,this.resetPercentils()},resetPercentils:function(){this.firstQuartileSent=!1,this.midpointSent=!1,this.thirdQuartileSent=!1},dispose:function(){this.unbindAll()},registerListeners:function(){var t=this;this.unbindAll(),_.each(this.videoevents,function(e){t.bindTo(t.videoManager,e,t.eventHandler)}),this.bindTo(this.videoManager,"adtimeupdate",this.adtimeUpdateHandler)},adtimeUpdateHandler:function(e){var t,i,n;this.boolStartSent&&(t=parseInt(e.params.ms,10),i=this.videoManager.sendCommand("getDuration"),n=Math.floor(t/i*100),!this.firstQuartileSent&&25<=n?(this.sendEvent("firstQuartile"),this.firstQuartileSent=!0):!this.midpointSent&&50<=n?(this.sendEvent("midpoint"),this.midpointSent=!0):!this.thirdQuartileSent&&75<=n&&(this.sendEvent("thirdQuartile"),this.thirdQuartileSent=!0))},eventHandler:function(e){e&&("vastparsed"===e.type?(this.parseTrackingEvents(e.params),this.parseImpressions(e.params)):"destroy"===e.type?this.dispose():"vasterror"===e.type?this.sendErrorPixel(e.params):this.sendEvent(e.type,e.params))},parseTrackingEvents:function(e){var t,i=this;try{_.each(e.trackingEvents,function(e){t=e["@attributes"].event,i.meta.trackingEvents[t]=i.meta.trackingEvents[t]||[],i.meta.trackingEvents[t].push(e["#cdata-section"])})}catch(e){}},parseImpressions:function(e){this.meta.impressions=e.configuration.impressions},sendEvent:function(e,t){var i;if("resetTrackEvents"!==e){if(this.videoManager.playlist.actualVideo&&this.videoManager.playlist.actualVideo.type===n.AD&&this.videoManager.playlist.actualVideo.type===n.AD&&!this.boolEndSent){if("fullscreen"===e&&!t)return;if(this.boolStartSent)if("ended"===e||"skip"===e)this.boolEndSent=!0;else if(this.isAdPaused){if("play"!==e)return;e="resume",this.isAdPaused=!1}else{if("play"===e)return;"pause"===e&&(this.isAdPaused=!0)}else{if("play"!==e)return;this.boolStartSent=!0,this.resetPercentils()}i=this.vastEventDictionary[e]||e,_.isUndefined(this.meta.trackingEvents[i])||_.each(this.meta.trackingEvents[i],function(e){this.sendBeacon(e)},this),"start"!==i||_.isUndefined(this.meta.impressions)||_.each(this.meta.impressions,function(e){this.sendBeacon(e)},this)}}else this.resetMeta()},sendErrorPixel:function(e){var t,i,n,s,a;t=e.ads.events,s=e.error.code,a=_.isArray(e.error.urls)?e.error.urls:[e.error.urls],_.isUndefined(t.adError.ad_tag_empty)||(i=(new Date).getTime(),n=(n=(n=t.adError.ad_tag_empty).replace("__timestamp__",i)).replace("__random-number__",Math.floor(1e3*Math.random())),this.sendBeacon(n)),_.each(a,function(e){e&&!_.isUndefined(e)&&(e=e.replace("[ERRORCODE]",s),this.sendBeacon(e))},this)},sendBeacon:function(e){e&&(this.beaconList=this.beaconList||[],this.beaconList.push(e),this.consumeBeaconList())},consumeBeaconList:function(){var e,t,i,n=this;!0!==this.sendingBeacon&&this.beaconList&&0!==this.beaconList.length&&(this.sendingBeacon=!0,(e=this.beaconList.shift())&&((t=new Image).src=e,i=function(){n.sendingBeacon=!1,n.consumeBeaconList()},t.onload=t.onerror=i))},bindTo:function(e,t,i){this.bindings=this.bindings||[],e.addEventListener(t,i),this.bindings.push({target:e,eventname:t,callback:i})},unbindAll:function(){_.each(this.bindings,function(e){e.target.removeEventListener(e.eventname,e.callback)})}}).constructor=e}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(t){"use strict";var e,i;return(e=function(e){this.videoManager=e}).prototype={videoevents:["play","pause","seeking","seeked","changevideo","playlistend","loadedmetadata","sas_adstart","sas_adend","related-playlist-loaded","related-playlist-show"],intra_s_account:null,initialize:function(e){_.extend(this,i),e&&!window.SITECATALYST_DISABLED&&(this.initializeSC(e),this.playingtype=t.AD,this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners())},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)})},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)})},dispose:function(){this.unRegisterListeners()}},i={initializeSC:function(e){this.playingtype=t.AD,this.model=e},eventHandler:function(e){if(e&&("changevideo"===e.type||this.playingtype===t.VIDEO||"playlistend"===e.type))switch(e.type){case"changevideo":this.playingtype=e.params.type,this.playingtype===t.VIDEO&&(this.videoItem=e.params.meta,this.videoChanged=!0);break;case"loadedmetadata":!0===this.videoChanged&&(this.openEventAlreadySent||(this.model.sendOpenEvent(),this.openEventAlreadySent=!0),this.videoChanged=!1);break;case"seeking":this.model.sendStopEvent(this.videoManager.sendCommand("getTimeBeforeSeekingSec"));break;case"seeked":this.videoManager.sendCommand("paused")||this.videoChanged||this.isAdvert||this.model.sendPlayEvent(this.videoManager.sendCommand("getCurrentTimeSec"));break;case"play":this.videoChanged||this.isAdvert||this.model.sendPlayEvent(this.videoManager.sendCommand("getCurrentTimeSec"));break;case"sas_adstart":this.isAdvert=!0,this.videoChanged||this.model.sendStopEvent(this.videoManager.sendCommand("getCurrentTimeSec"));break;case"pause":this.videoChanged||this.model.sendStopEvent(this.videoManager.sendCommand("getCurrentTimeSec"));break;case"sas_adend":this.isAdvert=!1;break;case"related-playlist-loaded":this.model.setRelatedPlaylist(e.params.playlist);break;case"related-playlist-show":null!==this.model.getRelatedPlaylist()&&0<this.model.getRelatedPlaylist().length&&this.model.sendRelatedEventShow();break;case"playlistend":this.model.sendStopEvent(this.videoManager.sendCommand("getCurrentTimeSec")),this.model.sendCloseEvent(),this.videoChanged=!0,this.openEventAlreadySent=!1;break;case"destroy":this.model.sendStopEvent(this.videoManager.sendCommand("getCurrentTimeSec")),this.dispose()}}},e.prototype.constructor=e}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=[i(0)],void 0===(s=function(e){"use strict";var t,i;return(t=function(e){this.videoManager=e}).prototype={videoevents:["subtitlesinit","subtitleschange","subtitlesdisabled"],initialize:function(e){_.extend(this,i),this._shouldInitSubtitlesFunctions()&&this._defineSubtitlesFunctions(),this._defineUserFunctions(),this._defineGlobalEvarsFunctions(),this._defineAppVersion(),this._defineDeviceUID(),this._defineAdDeviceUID(),this.initializeShared(e),this.model.subtitols="",this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners()},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)})},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)})},dispose:function(){this.unRegisterListeners()},_defineSubtitlesFunctions:function(){window.getSubtitlesStatus=window.getSubtitlesStatus||_.bind(function(){var e,t,i,n,s="No aplica";return n=this.hasSubtitles()?(t="DISPONIBLE IDIOMA SELECCIONAT",i=(e=this.getAvailableSubtitles()).enabled?"ACTIVAT":"DESACTIVAT",e.enabled?e.label:s):(t="NO DISPONIBLE IDIOMA SELECCIONAT",i=s),"SP:"+t+":"+i+":"+s+":"+s+":"+s+":"+s+":"+s+":"+n+":"+(this.model.isLive?s:"VOD")},this)},_defineUserFunctions:function(){window.resolveCcmaUser=window.resolveCcmaUser||_.bind(function(){var e="";return this.isCcmaRegister()&&(e=Moduls.login.getUser().username),Base64.encode(e)},this),window.resolveSuper3User=window.resolveSuper3User||_.bind(function(){var e="";return this.isSuper3Register()&&(e=String(Moduls.login.getUser().username)),Base64.encode(e)},this),window.resolveUser=window.resolveUser||_.bind(function(){var e="";return window.Moduls&&window.Moduls.login&&Moduls.login.isLogged()&&(e=null!=(e=Moduls.login.getSyncCCMAIdint())?e.toString():""),Base64.encode(e)},this),window.resolveRegister=window.resolveRegister||_.bind(function(){return this.isCcmaRegister()?"ccma":this.isSuper3Register()?"sp3":""},this),window.getUser=window.getUser||_.bind(function(){var e;return window.Moduls&&window.Moduls.login&&Moduls.login.isLogged()&&(e=Moduls.login.getUser()),e},this),window.getConsentVendor=window.getConsentVendor||_.bind(function(){var e,t=0;return"object"==("undefined"==typeof Didomi?"undefined":a(Didomi))?(t=!0===(e=Didomi.getUserConsentStatusForVendor(77))?1:!1===e?0:"",this.funcionCmp(t)):(t="",this.funcionCmp("")),t},this)},_defineGlobalEvarsFunctions:function(){window.getGlobalEvar=window.getGlobalEvar||_.bind(function(e){return window.globalEvars=window.globalEvars||{},window.s=window.s||{},window.globalEvars[e]=window.globalEvars[e]||window.s[e],window.globalEvars[e]},this)},_shouldInitSubtitlesFunctions:function(){return window.GLOBALCONFIGURATION.OVERWRITE_EVALUABLE_FUNCTIONS},_defineAppVersion:function(){window.appVersion=window.appVersion||(window.jitConfig?window.jitConfig.version:null)},_defineDeviceUID:function(){window.getDeviceUID=window.getDeviceUID||function(){if(window.Matr&&window.Matr.UID)return window.Matr.UID}},_defineAdDeviceUID:function(){window.getAdDeviceUID=window.getAdDeviceUID||function(){var e=window.getDeviceUID();return encodeURIComponent(Base64.encode(e+"-ccmatv33"))}},setSubtitles:function(e){this.model.subtitols=e},hasSubtitles:function(){return!!this.model.subtitols},getAvailableSubtitles:function(){return this.model.subtitols.subtitle},isCcmaRegister:function(){return window.Moduls&&window.Moduls.login&&"ccma"===Moduls.login.type&&Moduls.login.isLogged()},isSuper3Register:function(){return window.Moduls&&window.Moduls.login&&"sp3"===Moduls.login.type&&Moduls.login.isLogged()},funcionCmp:function(e){_comscore.push({c1:"2",c2:"11548294",cs_ucfr:e});var t=document.createElement("script"),i=document.getElementsByTagName("script")[0];t.async=!0,t.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/cs/11548294/beacon.js",i.parentNode.insertBefore(t,i)}},i={initializeShared:function(e){this.model=e},eventHandler:function(e){switch(e.type){case"subtitlesinit":case"subtitleschange":case"subtitlesdisabled":this.setSubtitles(e.params)}}},t.prototype.constructor=t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t,i;return i={isStarted:!((t=function(e){this.videoManager=e}).prototype={videoevents:["timeupdate","RmpAdClick","RmpEvent","EstasveientChanged","resize","playerdestroyed","play","pause","changevideo","playlistend","loadedmetadata","volumechange","ended","seeking","seeked","mute","unmute","fullscreen","error","casting","sas_adstart","sas_adend","quality","related-playlist-loaded","related-playlist-show","bufferChange","adPlay","adPause","meta","volume","complete","cast","seek","captionsChange","adRequest","adImpression","adComplete","adSkipped","adError","adClick","levels","levelsChanged","visualQuality","sas_adcreativitybegin","sas_adcreativityend"],initialize:function(e){_.extend(this,i),e&&!window.HEARTBEATS_DISABLED&&(this.initializeHB(e),this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners())},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)})},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)})},dispose:function(){this.unRegisterListeners(),void 0!==this.analyticsProvider&&null!==this.analyticsProvider&&this.analyticsProvider.destroy(),this.isStarted=!1}}),updateTime:0,notification:null,quality:{bitrate:5e4,startupTime:0,fps:24,droppedFrames:10},analyticsProvider:null,adParameters:null,id:null,adBlockType:null,adBlockPosition:0,adPosition:0,initializeHB:function(e){this.model=e,this.id=void 0!==this.model&&null!==this.model?this.model.get("id"):null,this.notification="function"==typeof window.NotificationCenter?window.NotificationCenter():null,window.VideoAnalyticsProvider&&(this.analyticsProvider=new VideoAnalyticsProvider(this.getMockVideoPlayer())),void 0!==this.model&&this.model.detectaChangePrograma(this)},getMockVideoPlayer:function(){var t=this;return{getVideoInfo:function(){var e=t.model.getParametres().eVar20;return t._videoInfo={},t._videoInfo.id=t.model.get("id").toString(),t._videoInfo.name=t.model.get("nom"),t._videoInfo.playerName="TEST - playerName",t._videoInfo.length=t.model.get("durada"),t._videoInfo.playhead=t.updateTime,t._videoInfo.mediaType=t.model.getParametres().eVar29.toString(),t._videoInfo.streamType="Directe"===e?"LINEAR":"Video"===t._videoInfo.mediaType?"VOD":"AOD",t._videoInfo.parametres=t.model.getParametres(),t._videoInfo},getAdBreakInfo:function(){return t._AdBreakInfo={},t._AdBreakInfo.parametres=t.adParameters,t._AdBreakInfo},getQoSInfo:function(){return t.quality},getCurrentPlaybackTime:function(){return t.updateTime},getID:function(){return t.id},adInfo:function(){return{name:"ad-default name",id:"ad-default id",position:t.adPosition,length:20}},adBreakInfo:function(){return{type:t.adBlockType,position:t.adBlockPosition,playhead:0}}}},eventHandler:function(e){if(this.notification)switch(e.type){case"timeupdate":this.updateTime=e.params?e.params.ms/1e3:0,this.notification.dispatchEvent({source:this.id,type:e.type});break;case"play":this.isStarted||(this.notification.dispatchEvent({source:this.id,type:"video_load"}),this.isStarted=!0),this.notification.dispatchEvent({source:this.id,type:e.type});break;case"quality":this.quality=e.params,this.notification.dispatchEvent({source:this.id,type:e.type});break;case"changevideo":this.isStarted&&this.dispose();break;case"sas_adstart":this.isStarted||(this.notification.dispatchEvent({source:this.id,type:"video_load"}),this.isStarted=!0),this.adParameters=e.params,this.adBlockPosition=this.adBlockPosition+1,this.adBlockType=e.params.adtype,this.notification.dispatchEvent({source:this.id,type:e.type});break;case"sas_adcreativitybegin":this.adPosition=this.adPosition+1,this.notification.dispatchEvent({source:this.id,type:e.type});break;case"sas_adcreativityend":this.notification.dispatchEvent({source:this.id,type:e.type});break;case"sas_adend":this.adPosition=0,this.notification.dispatchEvent({source:this.id,type:e.type});break;case"playlistend":this.isStarted&&(this.notification.dispatchEvent({source:this.id,type:"ended"}),this.isStarted=!1);break;default:this.notification.dispatchEvent({source:this.id,type:e.type})}}},t.prototype.constructor=t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t,i;return(t=function(e){this.videoManager=e}).prototype={videoevents:["changevideo","loadedmetadata","destroy","sas_adstart","timeupdate"],dictionary:{pre:"preroll",mid:"midroll",post:"postroll"},initialize:function(e){_.extend(this,i),this.initializeComscore(e),this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners()},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)})},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)})},eventHandler:function(e){switch(e.type){case"changevideo":this.videoItem=e.params.meta,this.videoItem.adtype=this.dictionary[e.params.adtype],this.videoChanged=!0;break;case"loadedmetadata":case"timeupdate":!0===this.videoChanged&&(this.videoChanged=!1,this.sendHit(this.videoItem,e.params||{}));break;case"sas_adstart":this.sendHit(this.videoItem,e.params);break;case"destroy":this.dispose()}},dispose:function(){this.unRegisterListeners()}},i={initializeComscore:function(e){this.model=e},sendHit:function(e,t){this.model&&this.model.sendHit(e,t)}},t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";function t(e){this.videoManager=e,this.YouboraWebPlayer={}}return t.prototype={initialize:function(e,t,i){var n=this;e?(this.model=e,this.meta=i,this.url=t,this.onChangeCallbacks=[],this.model.on&&(this.onOpcionsChange=function(){n.processYouboraVars(),_.each(n.onChangeCallbacks,function(e){e()})},this.model.on("change:opcions",this.onOpcionsChange)),this.processYouboraVars()):this.YouboraWebPlayer&&(this.YouboraWebPlayer.active=!1)},getData:function(){var i=this;return{getOpcions:function(){return i.YouboraWebPlayer.opcions},addOnChangeListener:function(e){i.onChangeCallbacks.push(e)},removeOnChangeListener:function(e){var t=i.onChangeCallbacks.indexOf(e);-1!==t&&i.onChangeCallbacks.splice(t,1)},active:this.YouboraWebPlayer.active}},dispose:function(){this.onOpcionsChange&&this.model.off("change:opcions",this.onOpcionsChange)},processYouboraVars:function(){var e=this.model.toJSON?this.model.toJSON():this.model,t=this.getProcessedYouboraVars(e);this.protectFileName(t),this.YouboraWebPlayer=t,this.YouboraWebPlayer.opcions=this.YouboraWebPlayer.opcions||{},this.YouboraWebPlayer.opcions["extraparam.1"]=this.meta.video?"video":"audio",this.YouboraWebPlayer.opcions["extraparam.2"]=this.meta.geo,this.YouboraWebPlayer.opcions["content.resource"]=this.getResource()},getProcessedYouboraVars:function(e){var i,n,s=this,a=_.isArray(e)?[]:{};return _.each(e,function(e,t){if(_.isString(e)&&0===e.indexOf("~"))try{i=e.substring(1),n=window,0===i.indexOf("window.")?i=i.substring(7):n=s,i=i.replace("()",""),e=_.reduce(i.split("."),function(e,t){return _.result(e,t)},n)}catch(e){}_.isArray(e)&&(e=_.without(e,null,!1,"")),_.isObject(e)&&(e=s.getProcessedYouboraVars(e)),a[t]=e}),a},getPlayerManufacturer:function(){try{return CONFIGJSON.PLAYERNAME+jwplayer.version.substring(0,1)}catch(e){return CONFIGJSON.PLAYERNAME+CONFIGJSON.PLAYERVERSION.substring(0,1)}},getMediaURL:function(){return this.protectFileName(this.url)},getResource:function(){var e=this.url;if(_.isArray(this.url)){var t=this.url.find(function(e){return!0===e.active});e=_.isUndefined(t)?this.url[0]:t}return(null===e||void 0===e?void 0:e.file)||this.protectFileName(e)},getMediaTitle:function(){return this.meta.titol},getMediaGeo:function(){return this.meta.geo},getMediaId:function(){return this.meta.idint},getMediaIsLive:function(){return this.meta.isLive},getMediaDurada:function(){return this.meta.durada},getUserId:function(){return console.log("*** GET USER ID 7 - "),"test-youbora"},protectFileName:function(e){return _.isArray(e)?JSON.stringify(e):e}},t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t,i={accountCode:jitConfig&&jitConfig.entorn&&"pro"!==jitConfig.entorn&&"aws_pro"!==jitConfig.entorn?"tv3dev":"tv3",enableAnalytics:!0};return((t=function(e){this.videoManager=e,this.VideoState={PLAY:0,STOP:1},this.youboraData={}}).prototype={intra_s_account:null,initialize:function(e,t,i){e&&e.attributes&&e.attributes.active?(this.model=e,this.meta=i,this.url=t):this.youboraData&&(this.youboraData.active=!1)},prepareInfo:function(){if(!this.infoPrepared&&this.model){this.infoPrepared=!0;var e=this.model.toJSON?this.model.toJSON():this.model,t=this.getProcessedYouboraVars(e);this.protectFileName(t),this.youboraData=t,this.youboraData.opcions=this.youboraData.opcions||{},this.youboraData.opcions["extraparam.1"]=this.meta.video?"video":"audio",this.youboraData.opcions["extraparam.2"]=this.meta.geo,this.addAdapter()}},addAdapter:function(){this.youboraPlugin||(this.youboraPlugin=new youbora.Plugin({accountCode:i.accountCode})),this.youboraData.opcions&&this.youboraPlugin.setOptions(this.youboraData.opcions),this.youboraAdapter=new youbora.adapters.CCMAGeneric(this),this.youboraAdsAdapter=new youbora.adapters.CCMAGeneric.AdsAdapter(this),this.youboraPlugin.setAdapter(this.youboraAdapter),this.youboraPlugin.setAdsAdapter(this.youboraAdsAdapter)},dispose:function(){this.infoPrepared=!1,this.youboraPlugin&&(this.youboraAdapter&&(this.youboraPlugin.removeAdapter(this.youboraAdapter),this.youboraAdapter.dispose&&this.youboraAdapter.dispose()),this.youboraAdsAdapter&&(this.youboraPlugin.removeAdsAdapter(this.youboraAdsAdapter),this.youboraAdsAdapter.dispose&&this.youboraAdsAdapter.dispose()),this.youboraPlugin.fireStop())},getData:function(){return this.prepareInfo(),this.youboraData},getProcessedYouboraVars:function(e){var i,n,s=this,a=_.isArray(e)?[]:{};return _.each(e,function(e,t){if(_.isString(e)&&0===e.indexOf("~"))try{i=e.substring(1),n=window,0===i.indexOf("window.")?i=i.substring(7):n=s,i=i.replace("()",""),e=_.reduce(i.split("."),function(e,t){return _.result(e,t)},n)}catch(e){}_.isArray(e)&&(e=_.without(e,null,!1,"")),_.isObject(e)&&(e=s.getProcessedYouboraVars(e)),a[t]=e}),a},getPlayerManufacturer:function(){return"CCMA"},getMediaURL:function(){return this.protectFileName(this.url)},getPlayerVersion:function(){return"CCMAPlayerHbbtv1.0"},getMediaTitle:function(){return this.meta.titol},getMediaGeo:function(){return this.meta.geo},getMediaId:function(){return this.meta.idint},getMediaIsLive:function(){return this.meta.isLive},getMediaDurada:function(){return this.meta.durada},protectFileName:function(e){return _.isArray(e)?JSON.stringify(e):e}}).constructor=t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";function t(e){this.videoManager=e}return(t.prototype={videoevents:["play","pause","ended","error","casting","destroy","sas_adstart","sas_adend","timeupdate","quality","subtitlesinit","subtitleschange","subtitlesdisabled"],initialize:function(e){this.model=e,_.isUndefined(e)||(_.isUndefined(window.Matr)?this.loadMatr().then(_.bind(function(){this.initializeMatr()},this)):this.initializeMatr())},initializeMatr:function(){this._hasBeenInitialized()&&this.dispose(),this.setProductID(),this.setURLsFromMediaJsp(),this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners(),this.isPlaying=!1,this.isCasting=!1,this.isAdvert=!1,this.avoidReplays=!1,this.profile="web",this.counter=0,this.mediaProperties=null,this.subtitlesProperties=null,this.firstTimeupdateTimestamp=null;var c=this;window.geoZoneHandler&&geoZoneHandler.getGeoZone(function(e){try{var l=Math.floor(1e5*Math.random()+1).toString()+(new Date).getTime().toString(),u=c._getInterval();c.initObject={sessionID:l,origin:window.location,AplicationID:CONFIGJSON.BDTRACKING.APLICATIONID,life_offset:CONFIGJSON.BDTRACKING.LIFE_OFFSET,interval:u,tagDataHW:function(){if(c._shouldInitWindowFunctions()&&c._initWindowFunctions(),c.isPlaying||c.isAdvert||c.isEnded){var e,t,i=c.model.getParametres(),n=0,s=!i.directe,a=!!i.startover,o=!0,r=!1,d=0;return c.videoManager.video&&(n=c.currentTime,_.isNumber(n)||(n=0)),s&&(r=c.previousTc!==n,o=1e3<n&&r),a&&(n=c._findGapFromStartOverAndBroadcast(n),i.directe="startover"),o?(d=Math.floor(n/1e3),c.counter=c.counter+1,e={pid:i.pid,cast:c.isCasting,cid:i.content.id_dty,cvar:i.content.variant,sbt:i.content.sbt,sbtd:i.content.sbtd,ui:window.resolveUser?window.resolveUser():"",ri:window.resolveRegister?window.resolveRegister():"",type:i.tipus,live:c.resolveLive(),plid:l,tc:d,uid:Matr.UID,count:c.counter,freq:u/1e3,pv:c.resolvePlayerVersion()},c.hasToSetQuality(i)&&c.hasQualityValue(i)&&(e.qualitat=i.content.qualitat),c.hasFormatValue(i)&&(e.format=i.content.format||c.mediaProperties.format),c.previousTc=n,e.bostr=(new Date).getTime(),_.isNull(Matr.debugInfo)||(e.debug=Matr.debugInfo,Matr.debugInfo=null),c.previousCid&&i.content.id_dty!=c.previousCid&&(t="playerIdRepetit: cid actual "+i.content.id_dty+" cid anterior "+c.previousCid,e.debug?e.debug=e.debug.concat("; ",t):e.debug=t),c.previousCid=i.content.id_dty,!_.isEmpty(i.dynamic_content)&&_.isObject(i.dynamic_content)&&(e=_.extend(e,i.dynamic_content)),e):void 0}}}}catch(e){window.printLog(e)}})},loadMatr:function(){return new Promise(function(t){if(window.Didomi&&window.resolveRegister&&""===window.resolveRegister()){var e=!1,i=function(){!e&&Didomi.getUserConsentStatusForVendor("c:matr-2b3yWcPU")&&(e=!0,window.Matr?t():requirejs(["https://statics.3cat.cat/js/libs/matr.min.js"],function(e){t()}))};Didomi.on("consent.changed",i),i()}else requirejs(["https://statics.3cat.cat/js/libs/matr.min.js"],function(e){t()})})},setProductID:function(){window.Matr.pid=this.model.getParametres().pid},setURLsFromMediaJsp:function(){var e=this.model.get("urls");e&&window.Matr&&(window.Matr.URLS.SENDMARK=e.sendmark,window.Matr.URLS.SENDUSERDATA=e.senduserdata,window.Matr.URLS.CHECKCORS=e.checkcors,window.Matr.URLS.GETTIME=e.gettime,window.Matr.URLS.SENDUSERCHANNELS=e.senduserchannels)},resolveLive:function(){var e=this.model.getParametres().directe,t=!!this.model.getParametres().startover,i=!(!this.mediaProperties||!this.mediaProperties.dvr)&&this.mediaProperties.dvr;return t?e="startover":i&&(e="dvr"),e},resolvePlayerVersion:function(){return CONFIGJSON.PLAYERNAME&&CONFIGJSON.PLAYERVERSION?CONFIGJSON.PLAYERNAME+"-"+CONFIGJSON.PLAYERVERSION:CONFIGJSON.PLAYERNAME?CONFIGJSON.PLAYERNAME:"nadiu"},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)}),window.addEventListener("beforeunload",this.eventHandler)},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)}),window.removeEventListener("beforeunload",this.eventHandler)},_getInterval:function(){return!this.model.getParametres().directe&&window.resolveCcmaUser&&""!==window.resolveCcmaUser()?3e4:55e3},eventHandler:function(e){switch(e.type){case"quality":this.mediaProperties=e.params;break;case"timeupdate":this.currentTime=e.params?e.params.ms:0;try{this.shouldIniMatr()&&(this.setAnonymization(this.initObject),Matr.Ini(this.initObject),this.avoidReplays=!0)}catch(e){window.printLog(e)}break;case"casting":this.isCasting=e.params.active;break;case"play":this.isPlaying=!0,this.firstTimeupdateTimestamp=null;break;case"beforeunload":this.initObject.currentTimer&&this.initObject.currentTimer.trigger();break;case"ended":this.initObject.currentTimer&&(this.isEnded=!0,this.isPlaying=!1,this.isAdvert=!1,this.initObject.currentTimer.trigger(),this.isEnded=!1);break;case"error":case"pause":this.isPlaying=!1,this.isAdvert=!1;break;case"destroy":this.dispose();break;case"sas_adstart":this.isAdvert=!0;break;case"sas_adend":this.isAdvert=!1;break;case"subtitleschange":case"subtitlesinit":case"subtitlesdisabled":this.subtitlesProperties=e.params}},setAnonymization:function(){this.initObject.anonymous=this.model.get("anonymous")},dispose:function(){this._stopMatrTimer(),this.isPlaying=!1,this.unRegisterListeners()},hasToSetQuality:function(e){return"video"===e.tipus},hasQualityValue:function(e){return e.content.qualitat},hasFormatValue:function(e){return e.content.format||this.mediaProperties.format},shouldIniMatr:function(){var e=!1;switch(this.model.getParametres().pid){case"HbbTV_TDT":this.iniMatrHbbtv()&&(e=!0);break;default:this.firstTimeupdateTimestamp||(this.firstTimeupdateTimestamp=(new Date).getTime()),1e3<(new Date).getTime()-this.firstTimeupdateTimestamp&&(this.iniMatrDiferit()||this.iniMatrDirecte())&&(e=!0)}return e},iniMatrDirecte:function(){return this.initObject&&!this.avoidReplays&&this.model.getParametres().directe&&!this.isAdvert},iniMatrDiferit:function(){return this.initObject&&!this.avoidReplays&&!this.model.getParametres().directe},iniMatrHbbtv:function(){return this.initObject&&!this.avoidReplays&&this.model.getParametres().directe},_hasBeenInitialized:function(){return!!this.initObject},_stopMatrTimer:function(){this.initObject&&this.initObject.currentTimer&&this.initObject.currentTimer.clear()},_findGapFromStartOverAndBroadcast:function(e){var t=window.Matr&&window.Matr.diffDateInMilis!==window.Matr.defaultDiffTime?window.Matr.diffDateInMilis:0;return window.Matr.getStartOverStartDateTime()+e-((new Date).getTime()+t)},_initWindowFunctions:function(){window.getSelectedVideoVariant=_.bind(function(){return""},this),window.getVideoQuality=_.bind(function(){return this.mediaProperties.qualitat},this),window.getVideoFormat=_.bind(function(){return this.mediaProperties.format},this),window.isSubtitleEnabled=_.bind(function(){return!(!this.subtitlesProperties||!this.subtitlesProperties.subtitle)&&this.subtitlesProperties.subtitle.enabled},this),window.getSubtitlesDetail=function(){return window.getSubtitlesStatus()}},_shouldInitWindowFunctions:function(){return window.GLOBALCONFIGURATION.OVERWRITE_EVALUABLE_FUNCTIONS}}).constructor=t}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(l){"use strict";var e,u;return(e=function(e){this.videoManager=e,this.VideoState={PLAY:0,STOP:1},this.setupComscore=!1}).prototype={videoevents:["start","play","pause","buffering","buffered","seeking","seek","seeked","changevideo","playlistend","playliststart","loadedmetadata","sas_adstart","sas_adend","ended","sas_adcreativitybegin","sas_adcreativityend","nextClick","related-playlist-click","sourceunload"],intra_s_account:null,dictionary:{pre:"preroll",mid:"midroll",post:"postroll"},initialize:function(e){if(_.extend(this,u),e&&this.consentAccepted()&&!this.disableAutoHit()&&(this.model=e,window.ns_&&window.ns_.analytics?this.initializeKantar():this.loadComscore().then(_.bind(function(){this.initializeKantar(),this.setupComscore||(this.model.setup(),this.setupComscore=!0)},this)),this.playingtype=null==this.playingtype?l.AD:this.playingtype,this.lastState=this.VideoState.STOP,this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners(),e&&"undefined"!=typeof SpringStreams&&"video"==e.get("mediaType"))){window.videoManager=this.videoManager,window.videoDurada=this.model.get("parametres").ns_st_cl/1e3||0;var t=this.model.get("parametres").ns_st_li,i=t?"live":"od",n=this.model.get("parametres").ns_st_stc,s=this.model.get("parametres").ns_st_ci,a=this.model.get("parametres").ns_st_en,o=t?this.model.get("parametres").ns_st_tdt:this.model.get("parametres").ns_st_ddt,r=this.model.get("parametres").ns_st_tm,d="10008/"+i+"/"+n+"/"+s+"/"+o.replaceAll("-","")+"/"+r.replaceAll(":","");this.sensors=new SpringStreams("tv3-spain"),this.desc={stream:d,duration:window.videoDurada,ct:"content",cq:a,sx:screen.width,sy:screen.height},this.myAdapter={getMeta:function(){return{pl:"bitmovin",plv:CONFIGJSON.PLAYERVERSION,sx:screen.width,sy:screen.height}},getDuration:function(){return window.videoDurada},getPosition:function(){return window.videoManager.sendCommand("isLive")?Math.round(Date.now()/1e3):window.videoManager.sendCommand("getCurrentTimeSec")}},this.stream=this.sensors.track("ccmaplayer",this.desc,this.myAdapter)}},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)})},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)})},dispose:function(){this.unRegisterListeners(),this.stream&&this.stream.stop()},consentAccepted:function(){return!_.isUndefined(window.Didomi)&&Didomi.getUserConsentStatusForVendor("77")},disableAutoHit:function(){return!_.isUndefined(window.DISABLEAUTOHIT)&&window.DISABLEAUTOHIT},loadComscore:function(){return new Promise(function(t){requirejs(["https://statics.3cat.cat/js/vendor/comscore-7.11.0.241017.min.js"],function(e){window.ns_=window.ns_||{},window.ns_.analytics=e,t()})})}},u={initializeKantar:function(){this.playingtype=this.playingtype=null==this.playingtype?l.AD:this.playingtype,this.adtype="",this.seeking=!1,this.sas_adcreativitybegin=!1,this.issuer="ui"},sendPlayEvent:function(){this.lastState!==this.VideoState.PLAY&&(this.lastState=this.VideoState.PLAY,this.playingtype===l.VIDEO?this.model.sendPlayEvent(1e3*this.videoManager.sendCommand("getCurrentTimeSec")):this.playingtype===l.AD&&(void 0===this.adtype&&(this.adtype=""),this.model.sendPlayAdEvent(this.adtype)))},sendStopEvent:function(){this.lastState!==this.VideoState.STOP&&(this.lastState=this.VideoState.STOP,this.model.sendStopEvent())},eventHandler:function(e){var t,i,n;switch(e.type){case"playliststart":this.model&&window.ns_&&(this.model.setup(),this.setupComscore=!0),this.lastState=this.VideoState.STOP;break;case"changevideo":this.playingtype=void 0!==(null===(t=e.params)||void 0===t?void 0:t.type)?null===(i=e.params)||void 0===i?void 0:i.type:this.playingtype,this.playingtype===l.VIDEO&&(this.videoItem=e.params.meta,this.videoChanged=!0);break;case"sas_adcreativitybegin":this.playingtype=l.AD,this.sas_adcreativitybegin=!0,this.sendPlayEvent();break;case"sas_adcreativityend":this.sas_adcreativitybegin&&(this.model.sendEndEvent(),this.sas_adcreativitybegin=!1,this.lastState=this.VideoState.STOP),this.playingtype=l.VIDEO;break;case"sas_adstart":this.sendStopEvent(),this.adtype=e.params.adtype,this.model.sendPlayAdDirecte(this.adtype);break;case"sas_adend":"postroll"!==this.adtype&&(this.model.sendBufferStop(),this.sendPlayEvent());break;case"loadedmetadata":!0===this.videoChanged&&(this.model.sendOpenEvent(1e3*this.videoManager.sendCommand("getCurrentTimeSec")),this.videoChanged=!1);break;case"play":var s;if(!this.seeking)this.sendPlayEvent(),this.issuer=null===(s=e.params)||void 0===s?void 0:s.issuer;break;case"ended":case"sourceunload":this.sendStopEvent(),this.model.sendEndEvent();break;case"pause":this.sendStopEvent(),this.issuer=null===(n=e.params)||void 0===n?void 0:n.issuer;break;case"buffering":this.model.sendBufferStart();break;case"buffered":this.model.sendBufferStop();break;case"playlistend":this.sendStopEvent();break;case"seek":case"seeking":this.seeking||(this.model.sendSeekingEvent(),this.model.sendBufferStart(),this.seeking=!0);break;case"seeked":this.seeking&&(this.seeking=!1,this.model.sendBufferStop(),"ui-seek"===this.issuer&&this.sendPlayEvent());break;case"destroy":this.sendStopEvent(),this.dispose()}}},e.prototype.constructor=e}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t;return(t=function(e){this.videoManager=e}).prototype={videoevents:["destroy","timeupdate"],isVOD:null,initialize:function(e){this.isVOD=!e.isLive,window.ResumeMedia&&this.isVOD&&(this.id=e.idint,this.tipology=e.video?window.ResumeMedia.TIPOLOGY.VIDEO:window.ResumeMedia.TIPOLOGY.AUDIO,this.eventHandler=_.bind(this.eventHandler,this),this.registerListeners())},checkStartTimeFromLib:function(){var i=this;return new Promise(function(t){var e={id:i.id,tipology:i.tipology};window.ResumeMedia&&i.isVOD?window.ResumeMedia.getItem(e).then(function(e){i.startTime=e,t()}):t()})},getStartTime:function(){var e;return this.startTime&&!_.isNaN(this.startTime.tc)&&(e=1e3*this.startTime.tc),e},registerListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.addEventListener(e,t.eventHandler)})},unRegisterListeners:function(){var t=this;_.each(this.videoevents,function(e){t.videoManager.removeEventListener(e,t.eventHandler,!1)})},eventHandler:function(e){if(e)switch(e.type){case"timeupdate":var t=this.lastExecutionTime||0,i=window.ResumeMedia.WRITING_FREQUENCY,n=(new Date).getTime();if(i<=n-t){this.lastExecutionTime=n;var s={id:this.id,tipology:this.tipology,tc:Math.round(e.params.ms/1e3)};window.ResumeMedia.setItem(s)}break;case"destroy":this.dispose()}},dispose:function(){this.unRegisterListeners()}},t}.apply(t,n))||(e.exports=s)}],s.c=a,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=6);function s(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var n,a});
//# sourceMappingURL=TVCPlayerCore.Bitmovin.UMD.min.js.map