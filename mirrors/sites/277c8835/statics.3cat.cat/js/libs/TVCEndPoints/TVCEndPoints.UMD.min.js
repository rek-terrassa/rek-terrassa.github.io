!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TVCEndPoints=e():t.TVCEndPoints=e()}(window,function(){return n={},a.m=i=[function(t,e,i){var n,a;n=[i(1)],void 0===(a=function(t){"use strict";return Backbone.Model.extend({dataFetchedType:"xml",childrenModels:{},fetch:function(e){(e=e||{}).dataType=e.dataType||this.dataFetchedType;var i=this;t.initialize(function(t){Backbone.Model.prototype.fetch.call(i,e)})},secToHHMMSS:function(t){var e,i,n,a;return e=t/3600,i=(t%=3600)/60,n=t%60,a="",_.each([e,i,n],function(t,e){t=Math.floor(t),a+=t<10?"0":"",a+=t,a+=2===e?"":":"}),this.duradaBeutifier(a)},duradaBeutifier:function(t){if(t&&-1!==t.indexOf(":")){var e=t.split(":");return 4===e.length&&e.pop(),"00"===e[0]&&(e=e.slice(1,e.length)),"0"===e[0].charAt(0)&&(e[0]=e[0].charAt(1)),e.join(":")}return t||""},HHMMSStosecs:function(t){var e,i,n=0;return t&&-1!==t.indexOf(":")&&(e=t.split(":"),i=1,_.each(e.reverse(),function(t){n+=parseInt(t,10)*i,i*=60})),n},update:function(t){this.updateChildrenModels(t)},updateChildrenModels:function(t){var i,n=this,a={},s={};_.each(t,function(t,e){_.has(n.childrenModels,e)?s[e]=t:a[e]=t}),_.each(this.childrenModels,function(t,e){(i=s[e])&&_.isObject(i)&&((i.parentModel=n).get(e)instanceof Backbone.Model||n.get(e)instanceof Backbone.Collection?n.get(e).update&&n.get(e).update(i):a[e]=new t(i))}),0<_.keys(a).length&&this.set(a)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n;void 0===(n=function(){"use strict";return{initialize:function(t){geoZoneHandler.getGeoZone(t)},isGeoBlocked:function(){return!1},getPlayableStream:function(t){return t.find(function(t){return geoZoneHandler.isInsideGeoZone(t.get("geo"))})}}}.apply(e,[]))||(t.exports=n)},function(t,e,i){var n,a;n=[i(26)],void 0===(a=function(t){"use strict";return Backbone.Collection.extend({model:t,getImageByHeight:function(i){var n;return this.reduce(function(t,e){return n=Math.abs(i-t.get("height")),Math.abs(i-e.get("height"))<n?e:t},this.at(0))},comparator:function(t){return-t.get("height")},toJSON:function(){var t,e,i={};for(t=Backbone.Collection.prototype.toJSON.apply(this,arguments),e=0;e<t.length;e+=1)i["height"+t[e].height]=t[e];return i.large=t[0],i.middle=t[Math.floor(t.length/2)],i.small=t[t.length-1],i}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(1)],void 0===(a=function(t){"use strict";return Backbone.Collection.extend({dataFetchedType:"xml",geoZone:"",fetch:function(e){(e=e||{}).dataType=e.dataType||this.dataFetchedType;var i=this;t.initialize(function(t){i.geoZone=t,Backbone.Collection.prototype.fetch.call(i,e)})},url:function(){function t(t,e){return e+"="+(_.isFunction(t)?t.call(i):t)}var i=this,e=(_.isFunction(this.paginator_core.url)?this.paginator_core.url.call(this):this.paginator_core.url)+"?";return e+=_.compact(_.union(_.map(this.paginator_ui,t,this),_.map(this.server_api,t,this))).join("&")},update:function(t){this.updateChildrenModels(t)},updateChildrenModels:function(i){var n,a=this,s={};_.each(this.childrenModels,function(t,e){(n=i[e])&&(a.get(e)instanceof Backbone.Model||a.get(e)instanceof Backbone.Collection?a.get(e).update&&a.get(e).update(n):s[e]=new t(n))}),0<_.keys(s).length&&this.set(s)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(3),i(1),i(32)],void 0===(a=function(i,e,t){"use strict";return i.extend({model:t,reset:function(t,e){i.prototype.reset.apply(this,arguments),this.existsVideoQualities()&&(this.setAvailableVideoQualities(),this.setVideoQuality(e.quality))},existsVideoQualities:function(){var t=!1;return 0!==this.length&&this.at(0).existsVideoQualities&&(t=this.at(0).existsVideoQualities()),t},setAvailableVideoQualities:function(){this.at(0).setAvailableVideoQualities()},setVideoQuality:function(t){t&&this.at(0).setVideoQuality(t)},getQualityOptions:function(){return this.at(0).getQualityOptions()},getStream:function(){var t=this.getValidFormatStreams();return(t=t&&e.getPlayableStream(t))&&t.get("url")},getStreamWithDeepCheck:function(t){return t(this.getStream())},getValidFormatStreams:function(){if(0<this.length){var t,e=this.getValidFormats();return t=0<e.length?(t=this.map(function(t){return 0<=e.indexOf(t.get("format"))?t:null}),new Backbone.Collection(_.compact(t))):this}return null},getValidFormats:function(){try{return GLOBALCONFIGURATION.FORMATS.VIDEO.VOD}catch(t){}return[]}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";return e.extend({initialize:function(t){e.prototype.initialize.apply(this,arguments),this.set("utc",new Date(t.utc))}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(27),i(28),i(10),i(29),i(30)],void 0===(a=function(e,t,i,n,a,s){"use strict";return e.extend({childrenModels:{sitecatalyst:t,comscore:i,matr:n,kantarst:a,adobe_analytics:s},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.update(t)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";return e.extend({toJSON:function(){var t=e.prototype.toJSON.apply(this,arguments);return t.custom&&(t.custom.pre=_.compact(_.isArray(t.custom.pre)?t.custom.pre:[t.custom.pre]),t.custom.mid=_.compact(_.isArray(t.custom.mid)?t.custom.mid:[t.custom.mid]),t.custom.post=_.compact(_.isArray(t.custom.post)?t.custom.post:[t.custom.post])),t}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(3)],void 0===(a=function(t){"use strict";return t.extend({})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";return e.extend({defaults:{active:!1,debug:!1,opcions:{}},initialize:function(){e.prototype.initialize.apply(this,arguments)},getParametres:function(){var i,n=_.clone(this.get("parametres"));return i=eval,_.each(n,function(e,t){if(_.isString(e)&&"~"===e.charAt(0)){try{e=i(e.substring(1))}catch(t){e=""}n[t]=e}}),n},toJSON:function(){var t=e.prototype.toJSON.call(this);return delete t.parentModel,t}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({getParametres:function(){var t=this.get("parametres");return this.evalParameters(t)},evalParameters:function(t){var i=this,n=eval,a={};return _.each(t,function(e,t){if(a[t]=e,_.isString(e)&&"~"===e.charAt(0)){try{e=n(e.substring(1))}catch(t){e=""}a[t]=e}else _.isObject(e)&&(a[t]=i.evalParameters(e))}),a}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(12),i(6),i(7),i(8),i(17),i(18),i(4),i(2),i(1),i(19),i(9)],void 0===(a=function(i,a,s,r,o,u,c,l,d,h,f,p){"use strict";return i.extend({mediaurl:window.URLS?URLS.VIDEOINFOPERIDJSON:null,dataFetchedType:"JSON",defaults:{newservice:!0,video:!0,islive:!1},url:function(){return this.mediaurl=this.mediaurl||URLS.VIDEOINFOPERIDJSON,URLS.WSBASEURL+this.mediaurl.replace(":idint",this.get("idint"))},fetch:function(t){var e=this;h.initialize(function(){i.prototype.fetch.call(e,t)})},existsVideoQualities:function(){var t=!1;return this.get("mediaoriginal")&&(t=this.get("mediaoriginal").existsVideoQualities()),t},setVideoQuality:function(t){this.set("quality",t)},setVariantPreference:function(t){this.variantPreference=t},existsVariant:function(t){var e=!1;return this.get("variants")&&(e=0<this.get("variants").length&&this.get("variants").findWhere({id:t})),e},selectVariantById:function(t){var e,i;this.existsVariant(t)?(this.get("mediaoriginal")||this.set("mediaoriginal",this.get("media")),i=(e=this.get("variants").findWhere({id:t}).get("media")).at(0).get("url"),e.setVideoQuality(this.get("quality")),i!==e.at(0).get("url")&&this.set({media:null},{silent:!0}),this.set("media",e)):this.selectOriginal()},selectOriginal:function(){var t,e;this.get("mediaoriginal")&&(e=(t=this.get("mediaoriginal")).at(0).get("url"),t.setVideoQuality(this.get("quality")),e!==t.at(0).get("url")&&this.set({media:null},{silent:!0}),this.set("media",t))},existsVariantOnResponse:function(t,e){return 0<e.variants.length&&e.variants.findWhere({id:t})},selectVariantByIdOnResponse:function(t,e){if(this.existsVariantOnResponse(t,e)){e.mediaoriginal||(e.mediaoriginal=e.media);var i=e.variants.findWhere({id:t}).get("media");i.setVideoQuality(this.get("quality")),e.media=i}return e},getSelectedVariantID:function(){var t,e;return e="STD",(t=this.get("media").at(0).get("parentModel"))&&(e=t.get("id")),e},getQualityOptions:function(){return this.get("mediaoriginal").getQualityOptions()},parse:function(t){var e,i=new Backbone.Collection(t.media),n=h.getPlayableStream(i);return e=this.get("quality")&&n?{informacio:new a(t.informacio),audiencies:new s(t.audiencies),publicitat:new r(t.publicitat),subtitols:new o(t.subtitols),variants:new u(t.variants),idiomes:new c(t.idiomes),media:new l(n.toJSON(),{quality:this.get("quality")}),mediaoriginal:new l(n.toJSON(),{quality:this.get("quality")}),geoblocked:0<i.length&&void 0===n,imatges:new d(t.imatges),keyframes:new d(t.keyframes),relacionats:new f([],t.relacionats),relacionatsEditor:new f([],t.relacionatsEditor),youbora:new p(t.youbora),sprites:t.sprites}:{informacio:new a(t.informacio),audiencies:new s(t.audiencies),publicitat:new r(t.publicitat),subtitols:new o(t.subtitols),variants:new u(t.variants),idiomes:new c(t.idiomes),media:new l(n?n.toJSON():null,{parse:!0}),geoblocked:0<i.length&&void 0===n,imatges:new d(t.imatges),keyframes:new d(t.keyframes),relacionats:new f([],t.relacionats),relacionatsEditor:new f([],t.relacionatsEditor),youbora:new p(t.youbora),sprites:t.sprites},this.variantPreference&&"STD"!==this.variantPreference&&(e=this.selectVariantByIdOnResponse(this.variantPreference,e)),t.code&&(e.code=t.code),e}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(13),i(5),i(14),i(15),i(2),i(16)],void 0===(a=function(e,t,i,n,a,s,r){"use strict";return e.extend({childrenModels:{codi_etic:r,data_caducitat:i,data_emissio:i,durada:t,tematica:n,social:a},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.update(t)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(3),i(31)],void 0===(a=function(t,e){"use strict";return t.extend({model:e,getStreamVad:function(){for(var t=0;t<this.models.length;t++)if("AUD"===this.models[t].get("id"))return this.models[t].get("media").getStream()}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(3)],void 0===(a=function(t){"use strict";return t.extend({})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(3),i(33)],void 0===(a=function(i,t){"use strict";return i.extend({model:t,dataFetchedType:"json",initialize:function(t,e){e&&(this.url=e.url),i.prototype.initialize.apply(this,arguments)},parse:function(t){return t.resposta.items.item},hasRelated:function(){return!!this.url}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(21),i(6),i(7),i(8),i(4),i(2),i(1),i(19),i(9)],void 0===(a=function(i,n,a,s,t,r,o,u,c,l){"use strict";return i.extend({mediaurl:window.URLS?URLS.AUDIOINFOPERIDJSON:null,dataFetchedType:"JSON",defaults:{newservice:!0,video:!1,islive:!1},url:function(){return URLS.WSBASEURL+this.mediaurl.replace(":idint",this.get("idint"))},fetch:function(t){var e=this;u.initialize(function(){i.prototype.fetch.call(e,t)})},parse:function(t){var e=new Backbone.Collection(t.media),i=u.getPlayableStream(e);return{informacio:new n(t.informacio),audiencies:new a(t.audiencies),publicitat:new s(t.publicitat),media:new r(i),geoblocked:0<e.length&&void 0===i,imatges:new o(t.imatges),keyframes:new o(t.keyframes),relacionats:new c([],t.relacionats),youbora:new l(t.youbora)}}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(13),i(5),i(14),i(15),i(2),i(16)],void 0===(a=function(e,t,i,n,a,s,r){"use strict";return e.extend({childrenModels:{codi_etic:r,data_caducitat:i,data_emissio:i,durada:t,tematica:n},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.update(t)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(34),i(6),i(7),i(8),i(17),i(18),i(36),i(2),i(1),i(9)],void 0===(a=function(n,t,e,i,a,s,r,o,u,c,l){"use strict";return n.extend({mediaurl:window.URLS?URLS.VIDEOINFOLIVEPERIDJSON:null,dataFetchedType:"JSON",childrenModels:{informacio:t,audiencies:e,publicitat:i,subtitols:a,variants:s,idiomes:r,imatges:u,keyframes:u,media:o,youbora:l},defaults:{newservice:!0,video:!0,islive:!0,offset:0,geoblocked:!0},initialize:function(){var i=this;n.prototype.initialize.apply(this,arguments),this.on("change:offset",function(){i.fetch()}),this.on("change:media",function(){var t=i.get("media"),e=c.getPlayableStream(t);i.set("geoblocked",0<t.length&&void 0===e)})},url:function(){return this.mediaurl=this.mediaurl||URLS.VIDEOINFOLIVEPERIDJSON,URLS.WSBASEURL+this.mediaurl.replace(":idint",this.get("idint")).replace(":offset",this.get("offset"))},fetch:function(t){var e=this;c.initialize(function(){n.prototype.fetch.call(e,t)})},parse:function(t){var e=this;return t.media||(t.media=[]),this.update(t),404!==t.code&&(clearTimeout(this.nextUpdateTimeout),this.nextUpdateTimeout=setTimeout(function(){e.fetch({})},this.getNextUpdateTime())),this},getNextUpdateTime:function(){return this.get("informacio").get("arafem").getTimeToNextUpdate()}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n;void 0===(n=function(){"use strict";return{defaults:{rights:!0},minRefreshTime:3e4,maxRefreshTime:3e5,getTimeToNextUpdate:function(){var t,e,i,n,a=this.minRefreshTime;try{t=new Date(this.get("data_emissio").get("utc")),e=this.get("durada").get("milisegons"),i=new Date(t.getTime()+e),n=new Date,a=Math.min(Math.max(i.getTime()-n.getTime(),this.minRefreshTime),this.maxRefreshTime)}catch(t){}return _.isNaN(a)?this.minRefreshTime:a},initialize:function(){this.on("change:drets",_.bind(this.onRightsMayChange,this))},hasRights:function(){return!!this.get("drets").geo[this.get("parentModel").get("parentModel").get("media").findWhere({valid:!0}).get("geo")]},onRightsMayChange:function(){var t=this.hasRights();this.get("rights")!==t&&this.set("rights",t)}}}.apply(e,[]))||(t.exports=n)},function(t,e,i){var n,a;n=[i(0),i(37),i(6),i(7),i(8),i(39),i(2),i(1),i(9)],void 0===(a=function(i,t,e,n,a,s,r,o,u){"use strict";return i.extend({mediaurl:window.URLS?URLS.AUDIOINFOLIVEPERIDJSON:null,dataFetchedType:"JSON",childrenModels:{informacio:t,audiencies:e,publicitat:n,imatges:r,keyframes:r,media:s,youbora:u},defaults:{newservice:!0,video:!1,islive:!0,offset:0},initialize:function(){var t=this;i.prototype.initialize.apply(this,arguments),this.on("change:offset",function(){t.fetch({})})},url:function(){return URLS.WSBASEURL+this.mediaurl.replace(":idint",this.get("idint")).replace(":offset",this.get("offset"))},fetch:function(t){var e=this;o.initialize(function(){i.prototype.fetch.call(e,t)})},parse:function(t){var e=this;return this.update(t),clearTimeout(this.nextUpdateTimeout),this.nextUpdateTimeout=setTimeout(function(){e.fetch({})},this.getNextUpdateTime()),this},getNextUpdateTime:function(){return this.get("informacio").get("arafem").getTimeToNextUpdate()}})}.apply(e,n))||(t.exports=a)},function(t,e,i){"use strict";i.r(e);var n=i(10),a=i.n(n);i.d(e,"MatrModel",function(){return a.a});var s=i(11),r=i.n(s);i.d(e,"MediaModel",function(){return r.a});var o=i(20),u=i.n(o);i.d(e,"AudioModel",function(){return u.a});var c=i(22),l=i.n(c);i.d(e,"VideoLiveModel",function(){return l.a});var d=i(24),h=i.n(d);i.d(e,"AudioLiveModel",function(){return h.a})},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({defaults:{size:"",url:"",width:0,height:0},initialize:function(){this.parseSize()},parseSize:function(){if(void 0!==this.get("size")&&-1!==this.get("size").indexOf("x")){var t=this.get("size").split("x");this.set("width",parseInt(t[0],10),{silent:!0}),this.set("height",parseInt(t[1],10),{silent:!0})}}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";return e.extend({segments:[],defaults:{compte:"",nom:"",durada:"",reproductor:"",tipus:"",subtitols:""},initialize:function(){e.prototype.initialize.apply(this,arguments)},setVariables:function(t){s?(_.each(t.parametres,function(t,e){s[e]=t}),window.globalEvars&&(window.globalEvars.eVar27&&(s.eVar27=s.prop27=window.globalEvars.eVar27),window.globalEvars.eVar89&&(s.eVar89=s.prop89=window.globalEvars.eVar89))):console.error("No està importat SiteCatalyst")},saveStartTime:function(){this.closeLastSegment(),this.segments.push({startTime:(new Date).getTime()})},saveStopTime:function(){var t=this.getLastSegment();t&&(t.endTime=(new Date).getTime())},closeLastSegment:function(){var t=this.getLastSegment();t&&!t.endTime&&this.sendStopEvent()},getLastSegment:function(){var t;return 0<this.segments.length&&(t=this.segments[this.segments.length-1]),t},getElapsedTime:function(){return _.reduce(this.segments,function(t,e){return e.startTime&&e.endTime&&(t=e.endTime-e.startTime+t),t},0)/1e3},sendOpenEvent:function(){var n=this;omnitureIni(this.get("tipus")),this.sendEvent("OPEN",null),this.get("directe")&&(this.off("change:nom"),this.actualProgram=this.toJSON(),this.on("change:nom",function(t,e){var i=n.toJSON();n.sendProgramChangedEvent(i,n.actualProgram),n.actualProgram=i}))},sendPlayEvent:function(t){!0===this.get("directe")&&(this.saveStartTime(),t=this.getElapsedTime()),this.sendEvent("PLAY",t)},sendStopEvent:function(t,e){!0===this.get("directe")&&(this.saveStopTime(),t=this.getElapsedTime()),this.sendEvent("STOP",t,e)},sendCloseEvent:function(t){window.siteCatalystList2Value=this.getRelatedPlaylist(),this.sendEvent("CLOSE",null,t),window.siteCatalystList2Value=void 0},sendEvent:function(t,e,i){if(this.lastEventName!==t){if(this.lastEventName=t,i=i||this.toJSON(),"OPEN"===t)try{omnitureClosePreviousMedia(i.compte)}catch(t){}this.setVariables(i),omnitureEventManager(i.compte,t,i.nom,e,i.durada,i.reproductor)}},setRelatedPlaylist:function(t){this.relatedPlaylist=t,window.siteCatalystList2Value=this.relatedPlaylist},getRelatedPlaylist:function(){return this.relatedPlaylist},sendRelatedEventShow:function(){"undefined"!=typeof s_account&&(s.clearVars(),s.events="event29",s.linkTrackEvents="event29",s.list2=this.getRelatedPlaylist(),s.linkTrackVars="events,list2",s.tl(this,"o",""),s.clearVars()),$("body").trigger("eventAudiencies","scEventPerDefinir")},sendProgramChangedEvent:function(t,e){this.sendStopEvent(null,e),this.sendCloseEvent(e),this.segments=[],this.sendOpenEvent(),this.sendPlayEvent()},getParametres:function(){var i,n=_.clone(this.get("parametres"));return i=eval,_.each(n,function(e,t){if(_.isString(e)&&"~"===e.charAt(0)){try{e=i(e.substring(1))}catch(t){e=""}n[t]=e}}),n},toJSON:function(){var t=e.prototype.toJSON.call(this);return t.parametres=this.getParametres(),t}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({sendHit:function(t,e){e.adtype=e.adtype||t.adtype;var i=this.getParametres(e);"undefined"!=typeof COMSCORE?COMSCORE.beacon(i):console.error("COMSCORE no existeix")},getParametres:function(t){var i=this.get("parametres")||{},n=eval;return"preroll"===t.adtype?i.c5="09":"midroll"===t.adtype?i.c5="11":"postroll"===t.adtype?i.c5="10":i.c5="03",_.each(i,function(e,t){if(_.isString(e)&&"~"===e.charAt(0)){try{e=n(e.substring(1))}catch(t){e=""}i[t]=e}}),i}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({defaults:{nom:"",directe:""},initialize:function(){t.prototype.initialize.apply(this,arguments)},setup:function(){this.firstplay=!0,this.firstAdplay=!0,this.analytics=ns_.analytics,this.analytics.PlatformApi.setPlatformAPI(this.analytics.PlatformAPIs.WebBrowser);var t=new this.analytics.configuration.PublisherConfiguration({publisherId:String(this.get("customerC2"))});this.analytics.configuration.addClient(t),this.analytics.start(),this.myStreamingTag=new ns_.analytics.StreamingAnalytics,this.myStreamingTag.setImplementationId(String(this.get("customerC2"))),this.myStreamingTag.createPlaybackSession()},sendPlayEvent:function(t){var e=t;t<0&&(e=-1*t),this.firstplay?(this.firstplay=!1,this.sendFirstPlayEvent(e)):(1===this.get("directe")?(this.myStreamingTag.setDvrWindowLength(72e5),this.myStreamingTag.startFromDvrWindowOffset(e)):this.myStreamingTag.startFromPosition(t),this.myStreamingTag.notifyPlay())},sendFirstPlayEvent:function(t){var e=new ns_.analytics.StreamingAnalytics.ContentMetadata;1===this.get("directe")?e.setMediaType(ns_.analytics.StreamingAnalytics.ContentMetadata.ContentType.LIVE):e.setMediaType(ns_.analytics.StreamingAnalytics.ContentMetadata.ContentType.LONG_FORM_ON_DEMAND),e.addCustomLabels(this.getParametres()),"audio"===this.get("mediaType")?e.classifyAsAudioStream(!0):e.classifyAsAudioStream(!1),this.cm=e,this.myStreamingTag.setMetadata(e),1===this.get("directe")?(this.myStreamingTag.setDvrWindowLength(72e5),this.myStreamingTag.startFromDvrWindowOffset(t)):this.myStreamingTag.startFromPosition(t),this.myStreamingTag.notifyPlay(),this.firstAdplay=!0},sendPlayAdDirecte:function(t){1===this.get("directe")&&this.sendPlayAdEvent(t)},sendPlayAdEvent:function(t){!0===this.firstAdplay?(this.firstAdplay=!1,this.sendFirstPlayAdEvent(t)):this.myStreamingTag.notifyPlay()},sendFirstPlayAdEvent:function(t){var e=new ns_.analytics.StreamingAnalytics.AdvertisementMetadata,i=this.getParametres(),n=this.get("parametres").ns_st_ct,a=this.get("parametres").ns_st_cl;if(1===this.get("directe"))e.setMediaType(ns_.analytics.StreamingAnalytics.AdvertisementMetadata.AdvertisementType.LIVE),i.ns_st_ct="va21";else switch(t){case"preroll":i.ns_st_ct="va11",e.setMediaType(ns_.analytics.StreamingAnalytics.AdvertisementMetadata.AdvertisementType.ON_DEMAND_PRE_ROLL);break;case"midroll":i.ns_st_ct="va12",e.setMediaType(ns_.analytics.StreamingAnalytics.AdvertisementMetadata.AdvertisementType.ON_DEMAND_MID_ROLL);break;case"postroll":i.ns_st_ct="va13",e.setMediaType(ns_.analytics.StreamingAnalytics.AdvertisementMetadata.AdvertisementType.ON_DEMAND_POST_ROLL)}e.setLength(0),i.ns_st_cl=0,e.setRelatedContentMetadata(this.cm),e.addCustomLabels(i),this.myStreamingTag.setMetadata(e),this.myStreamingTag.notifyPlay(),i.ns_st_ct=n,i.ns_st_cl=a,this.firstplay=!0,this.firstAdplay=!1},sendSeekingEvent:function(){this.myStreamingTag.notifySeekStart()},sendBufferStart:function(){this.myStreamingTag.notifyBufferStart()},sendBufferStop:function(){this.myStreamingTag.notifyBufferStop()},sendStopEvent:function(){this.myStreamingTag.notifyPause()},sendEndEvent:function(){this.firstAdplay=!0,this.firstplay=!0,this.myStreamingTag.notifyEnd()},sendOpenEvent:function(n){var a=this;1===this.get("directe")&&(this.off("change:nom"),this.actualProgram=this.toJSON(),this.on("change:nom",function(t,e){var i=a.toJSON();a.sendProgramChangedEvent(n),a.actualProgram=i}))},sendProgramChangedEvent:function(t){var e=t;t<0&&(e=-1*t),this.sendEndEvent(),this.myStreamingTag.createPlaybackSession(),this.sendFirstPlayEvent(e)},getParametres:function(){var i=this.get("parametres"),n=eval;return _.each(i,function(e,t){if(_.isString(e)&&"~"===e.charAt(0)){try{e=n(e.substring(1))}catch(t){e=""}i[t]=e}}),i}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";return e.extend({segments:[],defaults:{compte:"",nom:"",id:"",mediaType:"",model:"heartbeats"},initialize:function(){e.prototype.initialize.apply(this,arguments)},getParametres:function(){var i,n=_.clone(this.get("parametres"));return i=eval,_.each(n,function(e,t){if(_.isString(e)&&"~"===e.charAt(0)){try{e=i(e.substring(1))}catch(t){e=""}n[t]=e}}),n},detectaChangePrograma:function(t){var i=this,n=t;this.off("change:op-capitol"),this.on("change:op-capitol",function(t,e){i.toJSON();n.notification.dispatchEvent({source:n.id,type:"ended"}),n.notification.dispatchEvent({source:n.id,type:"video_load"}),n.notification.dispatchEvent({source:n.id,type:"play"})})},toJSON:function(){var t=e.prototype.toJSON.call(this);return t.parametres=this.getParametres(),t}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(4)],void 0===(a=function(e,t){"use strict";return e.extend({childrenModels:{media:t},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.update(t)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({defaults:{url:void 0,urls:void 0,qualityOptions:void 0},parse:function(t){return t=t||{},_.isObject(t.url)&&!_.isArray(t.url)&&(t.url=[t.url]),t},setVideoQuality:function(e){var t,i,n,a,s=this;if("auto"===(e=this.normalizeLabel(e)))return n=this.getUrlList(),i=(t=_.find(n,{active:!0}))?t.label:"empty-label",this.setVideoQuality(i);e&&(n=this.getUrlList(),_.isArray(n)&&(a=(t=_.find(n,function(t){return s.normalizeLabel(t.label)===e}))?t.file:n[0].file,this.set("url",a)))},existsVideoQualities:function(){return _.isArray(this.getUrlList())},setAvailableVideoQualities:function(){var t=this.getUrlList(),e=[];_.isArray(t)&&(e=_.map(t,function(t){return{label:t.label}}),this.set("qualityOptions",e))},getQualityOptions:function(){var t=this.get("qualityOptions");return t||(this.setAvailableVideoQualities(),t=this.get("qualityOptions")),t},getUrlList:function(){var t=this.get("url"),e=this.get("urls");return t&&(e||this.set("urls",t)),this.get("urls")},normalizeLabel:function(t){var e,i,n;for(e=(t=t.split("")).length,i=0;i<e;i+=1)-1!==(n="ÀÁÂÃÄÅàáâãäåÒÓÔÕÕÖØòóôõöøÈÉÊËèéêëðÇçÐÌÍÎÏìíîïÙÚÛÜùúûüÑñŠšŸÿýŽž".indexOf(t[i]))&&(t[i]="AAAAAAaaaaaaOOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz"[n]);return t.join("").toLowerCase()}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0)],void 0===(a=function(t){"use strict";return t.extend({})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(35),i(5)],void 0===(a=function(e,t,i){"use strict";return e.extend({childrenModels:{arafem:t,durada:i},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.update(t)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(12),i(23)],void 0===(a=function(t,e){"use strict";return t.extend(e)}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(4)],void 0===(a=function(t){"use strict";return t.extend({getStreamWithDeepCheck:function(i){var n=this.getValidFormatStreams(),a=this;n?geoZoneHandler.getGeoZone(function(t){var e=n.findWhere({geo:t});e.set("valid",!0),a.reset([e]),i(e.get("url"))},n.toJSON()):i("")},getValidFormats:function(){try{return GLOBALCONFIGURATION.FORMATS.VIDEO.LIVE}catch(t){}return[]}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(0),i(38),i(5)],void 0===(a=function(e,t,i){"use strict";return e.extend({childrenModels:{arafem:t,durada:i},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.update(t)}})}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(21),i(23)],void 0===(a=function(t,e){"use strict";return t.extend(e)}.apply(e,n))||(t.exports=a)},function(t,e,i){var n,a;n=[i(4)],void 0===(a=function(t){"use strict";return t.extend({getStreamWithDeepCheck:function(i){var n=this.getValidFormatStreams();geoZoneHandler.getGeoZone(function(t){var e=n.findWhere({geo:t}).get("url");i(e)},n.toJSON())},getValidFormats:function(){try{return GLOBALCONFIGURATION.FORMATS.AUDIO.LIVE}catch(t){}return[]}})}.apply(e,n))||(t.exports=a)}],a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=25);function a(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}var i,n});
//# sourceMappingURL=TVCEndPoints.UMD.min.js.map