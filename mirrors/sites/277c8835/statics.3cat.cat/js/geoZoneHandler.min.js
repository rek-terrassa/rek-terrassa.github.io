!function(n){var o,e,r,i,t,c=[],a=function(n){window.debug&&(window.printLog?window.printLog(n):console.log(n))},u=["CATALUNYA","ESPANYA","TOTS"],l=null,s=null;o=function(n){var o,e,i,t=u[u.length-1];i=function(e){l=e,s=o(),r(n)},o=function(){null==l&&a("Error availableZones. No currentGeoZone value");var n=_.indexOf(u,l);return n>-1?u.slice(n):[]},e={id:"geo",url:jitConfig.dinamicsResourcesHost+"/geo.json",dataType:"json",onError:function(){console.warn("Warning: geo.json no disponible, agafem default geo: TOTS"),i(t)},onSuccess:function(n){i(n.geo)}},$.ajax?(e.success=e.onSuccess,e.error=e.onError,$.ajax(e)):(e.type="json",ajaxLib.getAJAXResponse(e))},e=function(n,e){(c=c||[]).push(n),l?r(e):o(e)},t=function(n){if(n){var o=_.map(n,"geo"),e=_.intersection(s,o);return e.length>0?e[0]:o[o.length-1]}return l},r=function(n){for(var o,e=t(n);c.length>0;){o=c.pop();try{o(e)}catch(n){a("error calling callback on geoZoneHandler")}}},i=function(n){return s.indexOf(n)>=0},_.defer(function(){e(function(){})}),n.geoZoneHandler={getGeoZone:e,isInsideGeoZone:i}}(window);